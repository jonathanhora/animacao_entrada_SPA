"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{1223:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(80594),r=a(17492),l=a.n(r),n=a(69732),s=a(53239);let o=()=>{let e=(0,n.tH)(),[t,a]=(0,s.useState)(null),[r,o]=(0,s.useState)(null);return{createQuestion:function(t){return(0,i.sH)(this,arguments,void 0,function*(t,i={timeout:1e3}){try{let{data:r}=yield e.mutate({context:{timeout:i.timeout},mutation:l(),variables:t});return o(r),a(null),{data:r,error:null}}catch(e){return o(null),a(e.message),{data:null,error:e.message}}})},data:r,error:t}}},1621:(e,t,a)=>{a.d(t,{y:()=>r});var i=a(53239);let r=e=>{let t=(0,i.useRef)(!1),a=(0,i.useRef)(e);a.current=e,(0,i.useEffect)(()=>{if(!t.current)return t.current=!0,a.current()},[])}},1678:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(53239),r=a(94915),l=a(69279);let n=({children:e,className:t,from:a,href:n,onClick:s})=>e&&n?i.createElement(r.A,{as:"a",className:(0,l.y)("!w-auto rounded-md border-thin border-solid border-surface-container-low !py-2xsm px-xsm font-2xsm-regular",t),"data-testid":"report-button",endIcon:i.createElement("i",{className:"icon icon-chevron-right flex shrink-0 justify-center text-interaction-default [font-size:24px]","data-testid":"chevron-icon"}),href:(e=>{if(!e)return"";let t="string"==typeof e?e:e.toString(),i=a?(e=>{if(!e)return"";let[t,a=""]=e.split("?");if(!a)return e;let[i,r=""]=a.split("#"),l=new URLSearchParams(i).toString(),n=t;return l&&(n+=`?${l}`),r&&(n+=`#${r}`),n})(a):"";if(i){t=(t=t.replace(/([?&])from=[^&#]*/g,"")).replace(/[?&]$/,"");let e=encodeURIComponent(i);t.includes("?")?t+=`&from=${e}`:t+=`?from=${e}`}return t})(n),justifyContent:"space-between",onClick:s,variant:"light"},e):null},2545:(e,t,a)=>{a.d(t,{A:()=>u});var i=a(80594),r=a(74528),l=a(86936),n=a.n(l),s=a(4664),o=a.n(s),d=a(69732);let u=()=>{let e=(0,d.tH)();return{getItemOffers:t=>(0,i.sH)(void 0,void 0,void 0,function*(){let{item:a,maxSellers:i,pageSellers:l,zipcode:s}=t;try{let{data:t,error:d,loading:u}=yield e.query({fetchPolicy:"no-cache",query:(0,r.gql)`
          ${o()}
          ${n()}
        `,variables:{itemId:a.id,maxSellers:i,pageSellers:l,zipcode:s}});return{data:t.item.offers,error:null==d?void 0:d.message,loading:u}}catch(e){return{data:[],error:"Ocorreu um erro. Por favor tente novamente.",loading:!1}}})}}},5221:(e,t,a)=>{a.d(t,{A:()=>d});var i=a(53239),r=a(80004),l=a(69279);let n=(0,l.y)("p-[10px_16px]","border-thin border-solid border-[#B8C1C4]","rounded-lg","bg-white","w-full","gap-[14px]","grid grid-cols-[minmax(auto,42px)_auto]"),s=(0,l.y)("grid-area-image","h-[32px]"),o=(0,l.y)("flex flex-col","justify-around","grid-area-content"),d=({alt:e,height:t,imageUrl:a,text:l,width:d})=>i.createElement("div",{className:n,"data-testid":"cardan-car-info-container"},a&&i.createElement("div",{className:s,"data-testid":"cardan-car-info-image-container"},i.createElement(r.A,{alt:e,className:"max-h-[32px] max-w-fit","data-testid":"cardan-car-info-image",height:t,src:a,width:d})),i.createElement("div",{className:o,"data-testid":"cardan-car-info-content"},l&&i.createElement("p",{className:"font-2xsm-medium leading-4","data-testid":"cardan-car-info-text"},l)))},11046:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(20766),r=a(25378),l=a(53239),n=a(9470),s=a(45900);let o=({className:e,data:t})=>{var a,o,d;let{useNavigation:u}=(0,r.xo)(),c=(0,s.A)(),m=(0,i.rd)(),{offers:g=[]}=(null==t?void 0:t.item)||{},p=(null==g?void 0:g[0])||{},{seller:v}=p,f=new URL(`/lojista/${null==v?void 0:v.id}/`,c).toString();return(null==(a=null==p?void 0:p.seller)?void 0:a.id)||(null==(o=null==p?void 0:p.seller)?void 0:o.deliveryId)?l.createElement(n.A,{className:e,disableSellerClick:!1,onSellerClick:()=>{u({data:{screen_title:"P\xe1gina da loja",url:f},fallback:()=>{m.push(f)},type:"generic_hybrid_screen"})},productSku:(null==(d=null==t?void 0:t.item)?void 0:d.offerId)||"",seller:null==p?void 0:p.seller}):null}},11728:(e,t,a)=>{a.d(t,{A:()=>b});var i=a(80594),r=a(20766),l=a(7750),n=a(25378),s=a(53239),o=a(31642),d=a(24823),u=a(92939),c=a(52872),m=a(45900),g=a(69279),p=a(53737),v=a(59166),f=a(91020),h=a(23164);let b=({className:e,data:t,showChatButton:a})=>{var b,E,y;let x=(0,m.A)(),{offers:A=[]}=(null==t?void 0:t.item)||{},S=null==A?void 0:A[0],N=(0,r.rd)()||{},w=(0,m.A)(),{resultCustomerFollower:T}=(0,h.A)({customerId:null==(b=null==t?void 0:t.userInfo)?void 0:b.customerId,sellerId:null==(E=null==S?void 0:S.seller)?void 0:E.id}),[I,O]=s.useState(!0),C=!!(null==(y=null==t?void 0:t.userInfo)?void 0:y.customerId),{fetchSetFollower:R}=(0,f.A)(),D=null==S?void 0:S.seller,P=null==D?void 0:D.id,{publish:k}=(0,l.LJ)(),{useNavigation:j}=(0,n.xo)(),_=!!p.mn[P],L="magazineluiza"===P,M=(null==T?void 0:T.isFollowing)?"Seguindo":"Seguir",$=(null==T?void 0:T.isFollowing)||!1,H=new URL(`/lojista/${P}/`,x).toString();return s.useEffect(()=>{var e,t;let a=null==(e=N.getCookie)?void 0:e.call(N,v.xG);O(((e,t)=>{if(!e)return!1;try{let a=Number(t);return!t||e>a}catch(e){return!0}})(null==(t=null==D?void 0:D.stats)?void 0:t.score,a))},[D]),!L&&P?s.createElement(d.A,{onChange:({isVisible:e})=>{e&&(_||L||k("seller:info:impression",{value:D||{}}))}},s.createElement("div",{className:(0,g.y)("border-surface-container-low",e),"data-testid":"seller-info"},s.createElement("h2",{className:"mb-sm text-on-surface-2 font-md-bold"},"Informa\xe7\xf5es da loja"),s.createElement(u.A,{buttonLabel:M,isFollowing:$,onSellerChatClick:a?()=>{j({data:{seller_id:P,sku:null==t?void 0:t.item.id},fallback:()=>{N.push((0,c.l)({baseUrl:w,productId:null==t?void 0:t.item.id,sellerId:P}))},type:"chat_seller"})}:void 0,onSellerFollowClick:a&&C?()=>(0,i.sH)(void 0,void 0,void 0,function*(){(null==T?void 0:T.customerId)&&(null==T?void 0:T.sellerId)&&(yield R({customerId:T.customerId,followSeller:!$,sellerId:T.sellerId}),k("seller:info:selectcontent:followSeller:click",{value:{contentId:$?"nao-seguir":"seguir",contentType:`produto:${null==T?void 0:T.sellerId}`}}))}):void 0,seller:D,showSellerScore:I})),s.createElement("div",{className:"mt-xsm border-t-thin border-on-surface-8"},s.createElement(o.A,{full:!0,onClick:()=>{k("seller:info:pdp:open:modal:click",{value:D||{}}),j({data:{screen_title:"P\xe1gina da loja",url:H},fallback:()=>{N.push(H)},type:"generic_hybrid_screen"})},variant:"invisible"},"Ver mais sobre a loja"))):null}},12874:(e,t,a)=>{a.d(t,{FX:()=>i,Xz:()=>l,mG:()=>r});let i="ads",r="patrocinado",l={[i]:r}},13434:(e,t,a)=>{a.d(t,{A:()=>i});let i=(e="",t=0,{maxChars:a=1200,minWords:i=2}={})=>{let r=e.split(" ").filter(e=>""!==e),l=e.length;return l>0&&r.length<i&&t<3?{message:"O coment\xe1rio deve ter ao menos 2 palavras",textColor:"text.error",valid:!1}:{message:`${l} / ${a}`,textColor:"text.light",valid:!0}}},13540:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(7750),r=a(53239),l=a(31642);let n=({href:e})=>{let{publish:t}=(0,i.LJ)();return r.createElement(l.A,{as:"a",className:"lg:max-w-[302px]",color:"success",href:e,onClick:()=>{t("click:promoterOffer:button")}},"Ver produto")}},17277:(e,t,a)=>{a.d(t,{A:()=>d});var i=a(80594),r=a(7750),l=a(53239),n=a(31642),s=a(69279),o=a(91633);let d=({actionType:e="copy",buttonText:t="Copiar",className:a="",couponApplied:d=!1,couponName:u,delay:c=3e3,discountType:m,discountValue:g,error:p,expirationDate:v,expirationMessage:f="Copie o cupom e cole na revis\xe3o. V\xe1lido at\xe9",hasIconButton:h=!0,message:b,onCouponAction:E,onRemoveCoupon:y,pageType:x,text:A="Copiado"})=>{let[S,N]=(0,l.useState)(!1),w=(0,l.useMemo)(()=>(function({discountType:e,discountValue:t}){let a=Math.trunc(t),i={absolute:()=>`${(0,o.A)({decimal:!1,value:a}).replace(/\u00A0/g," ")} OFF`,percentage:()=>`${a}% OFF`}[e];return i?i():"Tipo de desconto inv\xe1lido"})({discountType:m,discountValue:g}),[g,m]),T=(0,l.useMemo)(()=>v&&function(e){let t=new Date(e);return isNaN(t.getTime())?"":`${t.getUTCDate()} de ${["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"][t.getUTCMonth()]}`}(v),[v]),I=(0,l.useMemo)(()=>{var e;return null!=(e=null==u?void 0:u.toUpperCase())?e:""},[u]),{publish:O}=(0,r.LJ)(),C=(0,l.useCallback)(()=>(0,i.sH)(void 0,void 0,void 0,function*(){if(u)if("apply"===e&&E)E(u.toUpperCase());else{try{"undefined"!=typeof window&&(yield navigator.clipboard.writeText(I))}catch(e){console.error(e)}finally{O("coupon:selectItem",{value:{eventData:{couponName:u,eventType:"select_content",pageType:x,titleSelect:b}}}),N(!0)}E&&E(u.toUpperCase())}}),[u,e,E,b,x,I,O]);return(0,l.useEffect)(()=>{if("copy"!==e||!S)return;let t=setTimeout(()=>N(!1),c);return()=>clearTimeout(t)},[S,c,e]),(0,l.useEffect)(()=>{u&&O("coupon:viewItem",{value:{eventData:{couponName:u,eventType:"view_content",pageType:x,titleSelect:b}}})},[u,b,x,O]),!function(e){return"percentage"===e||"absolute"===e}(m)?null:l.createElement("section",{className:(0,s.y)("grid",d?"grid-areas-[content_side,footer_footer]":"grid-areas-[content_content,footer_footer]",a),"data-testid":"coupon-code-container"},l.createElement("div",{className:(0,s.y)("flex items-center justify-between rounded-md p-2xsm text-on-lime-500 grid-in-[content]",p?"bg-surface-container-mid":"bg-lime-500")},l.createElement("div",{className:"flex shrink-0 items-center justify-center px-xsm text-on-surface-1 font-body-small-highlight"},l.createElement("i",{"aria-hidden":"true",className:"icon icon-cupom-journey mr-2xsm font-body-default"}),l.createElement("span",{className:"pt-3xsm"},w)),l.createElement("div",{className:"relative flex min-w-[98px]"},l.createElement("div",{"aria-live":"polite",className:(0,s.y)("w-full","bg-lime-400","text-on-lime-400","absolute","h-[28px]","flex","items-center","justify-center","rounded-md","transition-opacity","duration-500",S||d?"opacity-1 pointer-events-auto":"pointer-events-none opacity-0"),"data-testid":"coupon-code-copied"},l.createElement("i",{"aria-hidden":"true",className:"icon icon-check mr-2xsm font-title-small"}),l.createElement("span",{className:"font-body-small-highlight"},A)),l.createElement("input",{"aria-describedby":"coupon-auxiliary-text",className:(0,s.y)("h-[28px] w-full rounded-none rounded-bl-md rounded-tl-md p-xsm text-on-surface-4 font-body-small-highlight",p&&"line-through"),"data-testid":"coupon-code-input",readOnly:!0,value:null==u?void 0:u.toUpperCase()}),l.createElement("button",{"aria-label":`Copiar c\xf3digo ${u}`,className:"flex h-[28px] items-center rounded-br-md rounded-tr-md bg-interaction-default-inverted p-xsm text-on-interaction-default-inverted font-body-small-highlight","data-testid":"coupon-code-button",disabled:!!p,onClick:C},h&&l.createElement("i",{"aria-hidden":"true",className:"icon icon-content-copy mr-2xsm font-body-default"}),l.createElement("span",{className:(0,s.y)(p&&"text-on-surface-5")},t)))),d&&y&&l.createElement(n.A,{className:"px-2xsm grid-in-[side]",color:"danger","data-testid":"coupon-remove",onClick:y,size:"small",variant:"invisible"},"Remover"),T&&l.createElement("p",{className:"mt-xsm grid-in-[footer] font-body-xsmall md:mt-2xsm","data-testid":"coupon-auxiliary-text",id:"coupon-auxiliary-text"},f," ",T,"."),p&&l.createElement("p",{className:"pt-xsm text-danger-default font-body-small","data-testid":"coupon-error"},p))}},19880:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(53239),r=a(80004);let l=({className:e,height:t,imageSrc:a,productTitle:l,width:n})=>i.createElement("div",{className:`h-full w-full ${e}`},i.createElement(r.A,{alt:`Imagem do produto ${l}`,className:"mx-auto my-2xsm",height:t,src:a,width:n}))},20486:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(53239),r=a(80004),l=a(69279);let n=({children:e,logoUrl:t,promoterName:a})=>{let[n,s]=(0,i.useState)("undefined"!=typeof window?window.innerWidth:1024);(0,i.useEffect)(()=>{let e=()=>{s(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let o=(0,i.useMemo)(()=>({height:n>=1024?56:45,width:n>=1024?56:45}),[n]);return i.createElement("div",{className:(0,l.y)("z-100 py-mds flex h-[77px] w-full items-center self-center border-thin border-on-surface-10 bg-surface-container-lowest px-xsm elevation-down-md md:h-[100px]",e&&"!h-[121px] flex-col !items-start justify-around md:flex md:!h-[80px] md:flex-row md:!items-center md:justify-between"),"data-testid":"promoter-header"},i.createElement("div",{className:"flex items-center"},i.createElement("div",{className:"mr-xsm h-[45px] w-[45px] rounded-full border-thin border-on-surface-7 md:h-[56px] md:w-[56px]"},i.createElement(r.A,{alt:"Logo do divulgador",className:"rounded-full",height:`${o.height}`,src:t,width:`${o.width}`})),i.createElement("div",null,i.createElement("p",{className:"mb-2xsm text-on-surface-2 font-title-default-highlight"},a),i.createElement("p",{className:"text-on-surface-3 font-body-small"},"Influenciador Magalu"))),e&&e)}},21029:(e,t,a)=>{a.d(t,{i4:()=>I,XQ:()=>A,gA:()=>O,Wc:()=>C,Ib:()=>D,rg:()=>R});var i=a(80594),r=a(94055),l=a.n(r),n=a(92288),s=a(69732),o=a(20766),d=a(79561),u=a(7750),c=a(53239),m=a(72599),g=a(47121),p=a(69609),v=a(36656),f=a(86810),h=a.n(f);a(20533);var b=a(90710);a(38863);var E=a(64882),y=a(12874),x=a(49002);let A={ERROR:"error",IDLE:"idle",LOADING:"loading",SUCCESS:"success"},S={banners:{},fillrates:{},showcases:{},status:A.IDLE},N=(0,c.createContext)(S),w="rastreio",T="msite_magalog_medium",I=({children:e,data:t,timeout:a=5e3})=>{var r,m;let f=(0,o.rd)(),{client:b}=(0,n.A)(),{banners:y,fillrates:I,showcases:O,status:C}=S,R=(0,s.tH)(),[D,P]=(0,c.useState)({banners:y,fillrates:I,showcases:O}),{user:k}=(0,g.P)(),{location:j}=(0,p.k)(),_=(null==k?void 0:k.id)||(null==k?void 0:k.tempId)||"",L=(null==j?void 0:j.zipCode)||"",[M,$]=(0,c.useState)(C),{sendAdsFillrateEvents:H}=(()=>{let e=(0,s.tH)();return{sendAdsFillrateEvents:function(t){e.mutate({mutation:h(),variables:{input:{items:t}}}).then(({data:{sendAdsFillrateEvents:e},errors:t})=>{if(t||!e){let e=(null==t?void 0:t.map(e=>e.message).join(", "))||"";return void console.debug(`[SendAdsFillrateEvents] - Error sending data: ${e}`)}e&&((null==e?void 0:e.status)<200||(null==e?void 0:e.status)>=300)&&console.debug(`[SendAdsFillrateEvents] - Error sending data: ${e.status}`)}).catch(e=>{console.error(`[SendAdsFillrateEvents] - Mutation error: ${e}`)})}}})(),U=e=>(0,i.sH)(void 0,[e],void 0,function*({data:e=t}){var i,r,n,s,o;$(A.LOADING);try{let t=(0,x.QA)({customerId:_,data:e,zipcode:L}),d=yield R.query({context:{timeout:(null==(i=null==b?void 0:b.showcase)?void 0:i.timeout)||a},query:l(),variables:t}),u={banners:(0,x.NW)((null==(r=null==d?void 0:d.data.ads)?void 0:r.banners)||[]),fillrates:(0,x.sC)(null==(n=null==d?void 0:d.data.ads)?void 0:n.fillrates),showcases:(0,x.RZ)((null==(s=null==d?void 0:d.data.ads)?void 0:s.items)||[])};return P(u),$(A.SUCCESS),u&&e.ads&&((e,t)=>{let{showcases:a}=t;try{let t=[];a&&Array.isArray(a)&&a.length&&(t=a.reduce((t,a)=>{let i=e.fillrates[a.slot],r=e.showcases[a.slot];return i&&!Array.isArray(i)?[...t,(0,x.Wj)({fillrate:i,props:a,showcases:r})]:t},[])),t.length&&H(t)}catch(e){console.error(`Error normalizing fillrate payload: ${e}`)}})(u,e.ads),null==(o=null==d?void 0:d.data.ads)?void 0:o.banners}catch(e){$(A.ERROR),console.warn(`[AdsContext] - error trying to fetch: ${e}`)}}),{publish:F}=(0,u.LJ)(),X=(0,v.Ay)(_),V=(0,v.Ay)(_,{channel:"MSITE",device:null!=(m=null==(r=null==f?void 0:f.deviceInfo)?void 0:r.type)?m:"mobile",page:w,position:1,slot:T});return(0,c.useEffect)(()=>{d.Ay.isClientSide&&k&&(U({}),(()=>{var e;try{let a=(0,x.DU)(f,"track_id"),i=(0,x.DU)(f,"internal_ad");a&&!i&&(e=>{V.sendAdsClickEvents((0,x.Uq)(e,1)),F("promotion:click",{value:{eventData:(0,E.BP)({campaignId:"",imageUrl:"",redirectUrl:"",slot:T,trackId:e},w,w,{position:1,slot:T})}})})(a),a&&(null==(e=null==t?void 0:t.item)?void 0:e.id)&&(e=>{var a,i;X.sendAdsClickEvents([{additionalAttribution:{id:null!=(i=null==(a=null==t?void 0:t.item)?void 0:a.id)?i:"",type:"product"},adType:"SPONSORED_PRODUCT",position:1,trackId:e}])})(a)}catch(e){console.warn(`[AdsContext] - error trying to dispatch direct sell event: ${e}`)}})())},[t,k]),c.createElement(N.Provider,{value:Object.assign(Object.assign({},D),{fetchContextAds:U,status:M})},e)},O=()=>(0,c.useContext)(N),C=e=>{let{banners:t,status:a}=(0,c.useContext)(N),[i,r]=(0,c.useState)(),[l,n]=(0,c.useState)(!1),s=(0,c.useCallback)(e=>{r(e),n(!0)},[]);return{banner:(0,c.useMemo)(()=>{var a;return l&&i?i:!l&&e&&(null==(a=t[e])?void 0:a.length)?t[e][0]:void 0},[l,i,e,t]),setBanner:s,status:a}},R=e=>{let{showcases:t,status:a}=(0,c.useContext)(N),{isOnWishlist:i}=(0,m.E)();return{showcase:(0,c.useMemo)(()=>{if(null==t?void 0:t[e])return(0,b.Ay)({isOnWishlist:i,items:t[e].filter(({item:e})=>{var t;return 0!==(null==(t=null==e?void 0:e.offers)?void 0:t.length)}).map(({campaignId:e,item:t,slot:a,trackId:i})=>Object.assign(Object.assign({},t),{campaignId:e,slot:a,trackId:i})),productUrlSearchParams:y.Xz})},[t,e,i]),status:a}},D=e=>{let{banners:t}=(0,c.useContext)(N),[a,i]=(0,c.useState)([]);return(0,c.useEffect)(()=>{let r=[];e.forEach(e=>{let a=t[e];a&&r.push(...a)}),JSON.stringify(r)!==JSON.stringify(a)&&i(r)},[t,e,a]),{banners:a}}},22984:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(7750),r=a(53239);let l=()=>{let[e,t]=(0,r.useState)(null),{close:a,subscribe:l}=(0,i.LJ)();return(0,r.useEffect)(()=>{let e=({value:e})=>{t(e.closenessValue)};return l("product:closeness:value",e),()=>a("product:closeness:value",e)},[a,l]),{closeness:e}}},25952:(e,t,a)=>{a.d(t,{A:()=>m});var i=a(80594),r=a(53239),l=a(69279),n=a(78842),s=a(57984),o=a(31642),d=a(99697),u=a(9696),c=a(35992);let m=e=>{var{className:t="",errorEmail:a="Insira o e-mail corretamente.",errorName:m="Insira o nome completo corretamente.",labelEmail:g="E-mail",labelName:p="Nome",labelNewsletter:v="Quero receber ofertas e conte\xfados por e-mail",noticeMeLabel:f="Ver produtos similares",noticeMeLink:h,onSubmit:b,placeholderEmail:E="Digite seu e-mail",placeholderName:y="Digite seu nome",subtitle:x="Avise-me quando estiver dispon\xedvel",textSubmitButton:A="Avise-me",title:S="N\xe3o dispon\xedvel"}=e,N=(0,i.Tt)(e,["className","errorEmail","errorName","labelEmail","labelName","labelNewsletter","noticeMeLabel","noticeMeLink","onSubmit","placeholderEmail","placeholderName","subtitle","textSubmitButton","title"]);let[w,T]=(0,r.useState)(!0),[I,O]=(0,r.useState)(""),[C,R]=(0,r.useState)(""),[D,P]=(0,r.useState)({}),k=r.useCallback(e=>{let t=(0,s.f)(e)?void 0:{fullName:m};return P(e=>Object.assign(Object.assign({},(0,i.Tt)(e,["fullName"])),t)),t},[I]),j=r.useCallback(e=>{let t=(0,n.H)(e)?void 0:{email:a};return P(e=>Object.assign(Object.assign({},(0,i.Tt)(e,["email"])),t)),t},[C]),_=(0,r.useCallback)(()=>{O(""),R(""),T(!0)},[I,C]);return r.createElement("div",Object.assign({className:(0,l.y)("flex flex-col gap-lg",t),"data-testid":"let-me-know"},N),r.createElement("div",{className:"flex items-baseline gap-sm"},r.createElement(u.A,{className:"font-xlg-regular","data-testid":"let-me-know-title"},S),r.createElement("a",{className:"text-on-surface-4 underline font-2xsm-regular","data-testid":"let-me-know-link",href:h},f)),r.createElement("div",{className:"contents text-on-surface-4 font-2xsm-regular	","data-testid":"let-me-know-description"},x),r.createElement("form",{className:"flex flex-col gap-sm"},r.createElement(c.A,{"data-testid":"let-me-know-input-name",hasError:!!D.fullName,id:"let-me-know-input-name",label:p,onBlur:e=>k(e.target.value),onChange:e=>O(e.target.value),onFocus:()=>P(e=>(0,i.Tt)(e,["fullName"])),placeholder:y,supportingText:D.fullName,value:I}),r.createElement(c.A,{"data-testid":"let-me-know-input-email",hasError:!!D.email,id:"let-me-know-input-email",label:g,onBlur:e=>j(e.target.value),onChange:e=>R(e.target.value),onFocus:()=>P(e=>(0,i.Tt)(e,["email"])),placeholder:E,supportingText:D.email,value:C})),r.createElement(d.A,{checked:w,className:"w-full",id:"newletter-checkbox",label:v,onChange:e=>T(e.target.checked)}),r.createElement(o.A,{"aria-disabled":Object.entries(D).length>0,"data-testid":"let-me-know-submit",disabled:Object.entries(D).length>0,onClick:e=>{Object.entries(Object.assign(Object.assign({},k(I)),j(C))).length||b&&b({email:C,fullName:I,newsletter:w},_),e.preventDefault()}},A))}},29504:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(53239),r=a(69279);let l=({as:e,buttonText:t,className:a="",customIcon:l,customIconClassName:n="",icon:s,intent:o,message:d,onClickButton:u,small:c=!1,title:m})=>{let g=t&&u;return d?i.createElement(e||"div",{className:(0,r.y)(o,c?"alert-feedback-smaller":"alert-feedback",s&&"alert-feedback-icon",a),"data-testid":"alert-container",onClick:()=>{if(g)return u()}},l&&i.createElement("i",{className:(0,r.y)("icon",`icon-${l}`,n||`text-on-${o}-lighter-inverted`,"mr-sm")}),i.createElement("div",{className:"alert-feedback-container"},m&&i.createElement("p",{className:"alert-feedback-title"},m),i.createElement("p",{className:"alert-feedback-label"},d.trim()),g&&i.createElement("p",{className:"alert-feedback-button"},t))):null}},30048:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(53239),r=a(87157);let l=i.forwardRef(function({alwaysShow:e,children:t,className:a,value:l},n){let s=(0,r.QM)();if(null===s)throw TypeError("No TabContext provided");let o=(0,r.eR)(s,l),d=(0,r.vU)(s,l);return void 0===l?null:i.createElement("div",{"aria-labelledby":d,className:a,hidden:!e&&s.value!==l,id:o,ref:n,role:"tabpanel"},t)})},32179:(e,t,a)=>{a.r(t),a.d(t,{MediaGalleryModal:()=>V,default:()=>V});var i=a(53239),r=a(17402),l=a(80594),n=a(69279);let s=e=>{var{autoplay:t=1,mute:a=1,ratio:r="auto",src:s,title:o="Embed"}=e,d=(0,l.Tt)(e,["autoplay","mute","ratio","src","title"]);let u={auto:"aspect-auto",square:"aspect-square",video:"aspect-video"};return i.createElement("div",Object.assign({className:"w-[100%]","data-testid":"embed"},d),i.createElement("iframe",{allowFullScreen:!0,className:(0,n.y)(u[r]||u.auto,"w-[100%]"),"data-testid":"iframe-embed",src:((e,t=1,a=1)=>{if(!e||"string"!=typeof e||!e.includes("www.youtube.com/v/"))return e;let i=e.match(/v\/([a-zA-Z0-9_-]+)&?/),r=(null==i?void 0:i.length)?i[1]:null;return r?`https://www.youtube.com/embed/${r}?autoplay=${t}&mute=${a}`:e})(s||"",t,a),title:o}))};var o=a(36988),d=a(89508),u=a(16671),c=a(60944),m=a(31642),g=a(28683),p=a(29504),v=a(61594),f=a(78095),h=a(51520),b=a(83725);let E=({attributes:e,bottomContent:t,buttonDisabled:a=!1,onAddToCart:r,onClose:l,onSelectAttribute:n,open:s,title:o,topComponent:d})=>{let[u,c]=(0,i.useState)((0,f.UP)(e)),[g,E]=(0,i.useState)(null);return s&&i.createElement(h.A,{contentStyle:"!py-md gap-md flex flex-col",footer:i.createElement(m.A,{className:"btn-primary w-full",disabled:a,onClick:()=>{var t,a;let i=null==(t=Object.entries(u).find(([,e])=>!e))?void 0:t[0];if(i){let t=e.find(e=>e.type===i);return t?void E(null!=(a=(0,b.A)(t.type))?a:{intentType:"warning",message:`Para continuar, selecione o campo ${t.label}`}):void console.error("L\xf3gica de valida\xe7\xe3o inconsistente: atributo obrigat\xf3rio n\xe3o encontrado na lista.")}r()},size:"large",startIcon:"shopping-bag"},"Adicionar \xe0 sacola"),onClose:l,title:o,titleStyle:"text-on-surface-3 font-md-bold",visible:!0},d,g&&i.createElement(p.A,{icon:!0,intent:g.intentType,message:g.message}),i.createElement("div",{className:"-mt-sm"},i.createElement(v.A,{attributes:e,className:"[&_[data-testid=attribute-label]]:px-[0] [&_[data-testid=attribute-label]]:text-left [&_[data-testid=attribute-selector-container]]:justify-start [&_[data-testid=attribute-selector-container]]:px-[0]",onClick:(e,t,a)=>{e.preventDefault(),c(a),n(t)}})),t)};var y=a(41805);let x=e=>"video"===e.type&&e.src.includes("magalu-videos")||"audio"===e.type;var A=a(74528),S=a(37226),N=a(69732);a(38124),a(20766),a(20533),a(79561),a(38863);var w=a(58194),T=a(94813);let I=({buyButtonDisabled:e,item:t,onAddToCart:a,onVideoCartInteraction:r})=>{var n,s;let{badge:o,getItem:d,loyaltyTag:u,offer:p,selectedItem:v}=(e=>{let{getItemOfferAttributes:t}=(()=>{let e=(0,N.tH)();return{getItemOfferAttributes:t=>(0,l.sH)(void 0,void 0,void 0,function*(){let{itemId:a}=t;try{let{data:t,error:i,loading:r}=yield e.query({fetchPolicy:"no-cache",query:(0,A.gql)`
          query itemQuery(
            $itemId: ID!
            $offerOptions: OfferOptionsInput
            $maxSellers: Int
            $pageSellers: Int
            $zipcode: String
          ) {
            item(
              id: $itemId
              maxSellers: $maxSellers
              pageSellers: $pageSellers
              zipcode: $zipcode
            ) {
              id
              offerId
              image
              minimumOrderQuantity
              available
              attributes {
                ...attributes_itemAttributes
              }
              offers(options: $offerOptions) {
                ...offers_itemOffers
              }
            }
          }
          ${S.ItemWithAttributesFragment}
          ${S.ItemWithOffersFragment}
        `,variables:{itemId:a}});return{data:(0,T.A)({},{data:{item:t.item}}),error:null==i?void 0:i.message,loading:r}}catch(e){return{data:null,error:"Ocorreu um erro. Por favor tente novamente.",loading:!1}}})}})(),[a,r]=(0,i.useState)(e),{badge:n,loyaltyTag:s,offer:o}=(0,i.useMemo)(()=>{var e,t,i,r;let l=(null==(e=a.offers)?void 0:e[0])||{};return{badge:null==(t=l.badges)?void 0:t.slice(-1)[0],loyaltyTag:null==(r=null==(i=l.seller)?void 0:i.tags)?void 0:r.find(({type:e,version:t})=>"loyalty"===e&&"v2"===t),offer:l}},[a]);return{badge:n,getItem:e=>(0,l.sH)(void 0,void 0,void 0,function*(){let{data:a,error:i}=yield t({itemId:e});i||r(a)}),loyaltyTag:s,offer:o,selectedItem:a}})(t),[f,h]=(0,i.useState)(!1),[b,x]=(0,i.useState)(((e,t)=>!!e||(t.attributes&&0!==t.attributes.length?!t.attributes.some(e=>e.values.some(e=>e.available)):!t.available))(e,t)),w=()=>(0,l.sH)(void 0,void 0,void 0,function*(){h(!1),x(!0),yield a(v,p),x(!1)});return i.createElement(i.Fragment,null,i.createElement(m.A,{className:"btn-primary w-full",disabled:b,onClick:()=>{v.attributes&&v.attributes.length>0?h(!0):w()},size:"large",startIcon:"shopping-bag"},"Adicionar \xe0 sacola"),i.createElement("div",{className:"pointer-events-auto"},i.createElement(E,{attributes:null!=(n=v.attributes)?n:[],bottomContent:i.createElement("div",{className:"flex justify-between"},i.createElement(g.A,{discountLabel:null!=(s=null==u?void 0:u.message)?s:"OFF no PIX",itemOffer:p,showDiscount:!0,showLoyaltyDiscountTag:!!u},i.createElement("div",null,i.createElement("div",{className:"-ml-xsm"},i.createElement(g.A.Discount,null)),i.createElement(g.A.Original,null)),i.createElement(g.A.Final,null),i.createElement(g.A.MethodDescription,null)),!!o&&i.createElement(c.A,{displayMode:"productPage",height:48,key:o.tooltip,tooltip:`selo sobre a promo\xe7\xe3o ${o.tooltip}`,url:o.imageUrl,width:64})),buttonDisabled:!v.available,key:f?"open":"closed",onAddToCart:w,onClose:()=>h(!1),onSelectAttribute:({type:e,value:t,variationId:a})=>{a!==v.id&&d(null!=a?a:""),r({content_id:`${e}:${(0,y.A)(t)}`,content_type:"produto:variacao:modal-video-pdp",event:"select_content",item_id:a})},open:f,title:"Selecione os detalhes"})))};var O=a(80004);function C({currentTime:e,duration:t,onChange:a}){let[r,l]=(0,i.useState)(!1),[s,o]=(0,i.useState)(e),[d,u]=(0,i.useState)(!1),c=(0,i.useRef)(e),m=(0,i.useRef)(null),g=(0,i.useRef)({didMove:!1,isEngaged:!1,startX:0}),p=e=>{if(!m.current||0===t)return;let a=m.current.getBoundingClientRect(),i=Math.min(Math.max((e-a.left)/a.width,0),1)*t;o(i),c.current=i},v=e=>{if(e.preventDefault(),e.stopPropagation(),!g.current.didMove){if(!(Math.abs(e.clientX-g.current.startX)>3))return;g.current.didMove=!0,l(!0)}p(e.clientX)},f=e=>{if(g.current.didMove&&e.preventDefault(),!g.current.didMove){if(!(Math.abs(e.touches[0].clientX-g.current.startX)>5))return;g.current.didMove=!0,l(!0)}p(e.touches[0].clientX)},h=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",h),window.removeEventListener("touchmove",f),window.removeEventListener("touchend",h),g.current.isEngaged&&(a(c.current),g.current.isEngaged=!1,g.current.didMove=!1,l(!1))};(0,i.useEffect)(()=>()=>{h()},[]),(0,i.useEffect)(()=>{if(r||o(e),e<s&&e<1){u(!0);let e=setTimeout(()=>{u(!1)},100);return()=>clearTimeout(e)}},[e,r,s]);let b=t>0?s/t*100:0;return i.createElement("div",{"aria-valuemax":t,"aria-valuemin":0,"aria-valuenow":e,"aria-valuetext":`${Math.round(e)} segundos`,className:"group relative w-full cursor-pointer touch-none select-none pb-[6px] pt-[18px]",onMouseDownCapture:e=>{e.stopPropagation(),0===e.button&&(g.current.isEngaged=!0,g.current.startX=e.clientX,p(e.clientX),window.addEventListener("mousemove",v),window.addEventListener("mouseup",h))},onTouchStartCapture:e=>{e.stopPropagation(),g.current.isEngaged=!0,g.current.startX=e.touches[0].clientX,p(e.touches[0].clientX),window.addEventListener("touchmove",f,{passive:!1}),window.addEventListener("touchend",h)},ref:m,role:"progressbar"},i.createElement("div",{className:(0,n.y)("relative h-[3px] w-full transition-[height] duration-200 ease-in-out",{"h-[6px]":r})},i.createElement("div",{className:(0,n.y)("absolute inset-[0]",{"transition-[clip-path] duration-200 ease-linear":!r&&!d}),style:{background:"linear-gradient(90deg, rgba(251, 229, 59, 0.9) 2.99%, rgba(255, 79, 1, 0.9) 23.86%, rgba(255, 20, 179, 0.9) 45.96%, rgba(128, 0, 255, 0.9) 70.51%, rgba(0, 193, 255, 0.9) 101.2%, rgba(23, 240, 54, 0.9) 125.75%)",clipPath:`inset(0 calc(100% - ${b}%) 0 0)`}}),i.createElement("div",{className:(0,n.y)("absolute top-1/2 size-[6px] -translate-y-1/2 translate-x-1/2 rounded-full bg-surface-container-lowest duration-200 ease-linear",{"size-sm transition-[width,height]":r},{"transition-[width,height,left] will-change-[left]":!r&&!d}),style:{left:`calc(${b}% - ${r?"6px":"3px"})`}})))}let R=({active:e=!0,aspectRatio:t="9:16",autoplay:r=!1,className:s,loop:o=!1,muted:d=!1,onVideoInteraction:u,poster:c,sources:m})=>{let g=(0,i.useRef)(null),p=(0,i.useRef)(null),v=(0,i.useRef)(new Set),[f,h]=(0,i.useState)(0),[b,E]=(0,i.useState)(0),[y,x]=(0,i.useState)(!r),[A,S]=(0,i.useState)(!1),[N,w]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(!g.current)return;let e=document.createElement("video-js");e.style.backgroundColor="transparent",g.current.appendChild(e);let i=!1;return(0,l.sH)(void 0,void 0,void 0,function*(){let n=yield(0,l.sH)(void 0,void 0,void 0,function*(){let{default:e}=yield Promise.all([a.e(461),a.e(773),a.e(89),a.e(833),a.e(205),a.e(254),a.e(827),a.e(474),a.e(298),a.e(417),a.e(6),a.e(468),a.e(328),a.e(732),a.e(338),a.e(809),a.e(478),a.e(409),a.e(604),a.e(618)]).then(a.bind(a,46975));return e});if(i)return;let s=p.current=n(e,{aspectRatio:t,autoplay:r,controls:!1,errorDisplay:!1,fill:!0,loadingSpinner:!1,loop:o,muted:d,playsinline:!0,poster:c,preload:"auto",sources:m});s.on("ready",()=>{let e=s.el().querySelector("video");e&&c&&e.setAttribute("poster",c)}),s.on("timeupdate",()=>{var e,t;let a=null!=(e=s.currentTime())?e:0,i=null!=(t=s.duration())?t:0;if(h(a),E(i),0===i)return;let r=Math.round(a/i*100);[10,25,50,75].forEach(e=>{r>=e&&!v.current.has(e)&&(v.current.add(e),null==u||u({event:"video_progress",video_current_time:a,video_duration:i,video_percent:e,video_url:m[0]}))}),r>=99&&!v.current.has(100)&&(v.current.add(100),null==u||u({event:"video_complete",video_duration:i,video_url:m[0]})),a>=5&&!v.current.has("5s")&&(v.current.add("5s"),null==u||u({event:"video_engagement",video_current_time:a,video_duration:i,video_percent:r,video_url:m[0]}))}),s.on("error",()=>{w(!0),null==u||u({event:"video_error",video_error_message:"Ocorreu um problema durante a reprodu\xe7\xe3o.",video_url:m[0]})}),s.on("waiting",()=>{S(!0)}),s.on("playing",()=>{x(!1),S(!1),v.current.has(0)||(v.current.add(0),null==u||u({event:"video_start",video_duration:s.duration(),video_trigger_method:"click",video_url:m[0]}))}),s.on("pause",()=>{x(!0),v.current.has(100)||null==u||u({event:"video_pause",video_current_time:s.currentTime(),video_duration:s.duration(),video_url:m[0]})})}).catch(e=>{w(!0),null==u||u({event:"video_error",video_error_message:(null==e?void 0:e.message)||"Erro ao carregar o player",video_url:m[0]})}),()=>{i=!0,p.current&&(p.current.dispose(),p.current=null)}},[]),(0,i.useEffect)(()=>{let e=p.current;e&&e.muted(d)},[d]),(0,i.useEffect)(()=>{let t=p.current;t&&!e&&t.pause()},[e]),i.createElement("div",{className:(0,n.y)("relative size-full md:aspect-[9/16] md:h-dvh md:w-auto",s),"data-vjs-player":!0},i.createElement("div",{className:"flex size-full items-center justify-center",ref:g}),i.createElement("button",{className:"absolute inset-[0] flex size-full items-center justify-center bg-[transparent]",onClick:()=>{let e=p.current;e&&(e.paused()?e.play():e.pause())}},y&&i.createElement("svg",{fill:"none",height:"55",viewBox:"0 0 45 55",width:"45",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M0 50.547V4.453Q0 2.561 1.333 1.28 2.667 0 4.444 0 5 0 5.611.167t1.167.501L43 23.715q1 .668 1.5 1.67T45 27.5t-.5 2.115-1.5 1.67L6.778 54.332q-.556.334-1.167.501A4.4 4.4 0 0 1 4.444 55q-1.778 0-3.11-1.28Q0 52.439 0 50.547",fill:"#FFF",fillOpacity:"0.4",opacity:"1"}))),A&&i.createElement("div",{className:"pointer-events-none absolute inset-[0] flex items-center justify-center"},i.createElement(O.A,{alt:"\xedcone de carregamento",height:"48",src:"https://wx.mlcdn.com.br/site/shared/icons/LoaderColorFull.svg",width:"48"})),N&&i.createElement("div",{className:"absolute inset-[0] flex flex-col items-center justify-center gap-md bg-on-surface-1 text-center text-on-surface-10"},i.createElement("span",{className:"icon icon-error-outline text-danger-default font-md-regular"}),i.createElement("div",{className:"font-md-bold"},"Desculpe, este v\xeddeo n\xe3o pode ser reproduzido."),i.createElement("div",{className:"font-xsm-regular"},"Ocorreu um problema durante a reprodu\xe7\xe3o.")),!N&&i.createElement("div",{className:"absolute inset-x-[0] bottom-[0] px-md md:bottom-xsm"},i.createElement(C,{currentTime:f,duration:b,onChange:e=>{let t=p.current;t&&(t.currentTime(e),h(e))}})))},D=({active:e,bgImage:t,muted:a,onVideoInteraction:r,src:l,type:n,videoHost:s})=>{let{poster:o,sources:d}=((e,t,a)=>{let i=new URL(t).searchParams.get("external");return{poster:"audio"===e?void 0:`${a}/video/thumbnails/${i}.jpg`,sources:"audio"===e?[t]:[`${a}/video/processed/${i}/hls/multivariant_playlist.m3u8`]}})(n,l,s);return i.createElement(i.Fragment,null,"audio"===n&&t&&i.createElement(O.A,{alt:"Imagem de fundo do \xe1udio",className:"pointer-events-none absolute h-full w-auto object-contain md:aspect-[9/16]",height:"420",src:t,width:"420"}),i.createElement(R,{active:e,autoplay:"video"===n&&e,loop:"video"===n,muted:a,onVideoInteraction:"video"===n?r:void 0,poster:o,sources:d}))};var P=a(1719);let k=({children:e})=>{let t=i.useRef(null),a=e=>{var t,a;t=e.instance,(null==(a=e.state)?void 0:a.positionX)>=0&&(null==a?void 0:a.positionY)>=0&&(null==a?void 0:a.scale)<=1?t.setup.panning.disabled=!0:t.setup.panning.disabled=!1};return i.createElement(P.GT,{initialScale:1,onInit:e=>{e.instance.setup.panning.disabled=!0},onPanning:a,onZoomStop:a,ref:t},i.createElement(P.WZ,{contentStyle:{height:"100%",width:"100%"},wrapperStyle:{height:"100%",width:"100%"}},e))},j=({alt:e,src:t})=>i.createElement(k,null,i.createElement("div",{className:"flex size-full justify-center"},i.createElement(O.A,{alt:e,className:"h-full w-auto object-contain",disabledSrcSet:!1,height:"800",src:t,width:"800",wResolutions:[[800,800],[1280,1280],[1920,1920]]})));var _=a(1304);let L={error:{background:"bg-danger-lighter-inverted  border-thin border-on-danger-default-inverted text-on-surface-2",message:"N\xe3o foi poss\xedvel adicionar este item. Tente novamente."},success:{background:"bg-on-surface-2 text-on-surface-10",message:"Adicionado a sacola"}},M=({image:e,onClose:t,onRedirectToCartClick:a,status:r})=>{let l=L[r];return(0,i.useEffect)(()=>{let e=setTimeout(()=>{t()},1e4);return()=>{clearTimeout(e)}},[t]),i.createElement("div",{className:(0,n.y)(l.background,"pointer-events-none mx-xsm flex items-center gap-sm rounded-md px-md py-sm elevation-sm ")},"error"===r&&i.createElement("span",{className:"icon icon-error-outline text-on-danger-default-inverted font-md-regular"}),"success"===r&&e&&i.createElement(O.A,{alt:"Imagem do produto",className:"size-xlg rounded-sm",height:"32",src:e,title:"Imagem do produto",width:"32"}),i.createElement("div",{className:"flex-grow font-2xsm-regular"},l.message),"success"===r&&i.createElement(m.A,{className:"pointer-events-auto border-none bg-[transparent] p-[0] font-2xsm-bold",onClick:a},"Ver sacola"))};var $=a(25378),H=a(54046);let U=[{icon:"icon-facebook",platform:"facebook",url:"https://m.facebook.com/sharer/sharer.php?u={url}"},{icon:"icon-twitter",platform:"twitter",url:"https://twitter.com/intent/tweet?text={title}&url={url}"},{icon:"icon-whatsapp",platform:"whatsapp",url:"https://wa.me/?text={url}"},{icon:"icon-mail",platform:"email",url:"mailto:?subject={title}&body={desc}%20{url}"}],F=({onShare:e,path:t,title:a})=>{let r=(0,i.useMemo)(()=>({text:a,title:a,url:`https://www.magazineluiza.com.br${t}?partner_id=64853&utm_source=pdp_desk&utm_medium=share`}),[t,a]),s=(0,i.useMemo)(()=>U.map(e=>Object.assign(Object.assign({},e),{url:e.url.replace("{title}",encodeURIComponent(r.title)).replace("{desc}",encodeURIComponent(r.text)).replace("{url}",encodeURIComponent(r.url))})),[r]),{canShare:o,share:d}=(0,H.A)(r),{usePlatformShare:u}=(0,$.xo)(),[c,m]=(0,i.useState)(!1);return i.createElement("div",{className:"relative"},i.createElement(_.A,{"aria-label":"compartilhar",className:"pointer-events-auto !size-[36px] border-none bg-surface-container-lowest hover:bg-surface-container-lowest",onClick:()=>{var t;(null==(t=null==w.ZB?void 0:w.ZB.didFoundSDK)?void 0:t.call(w.ZB))&&e("native-device",r),u({fallback:()=>(0,l.sH)(void 0,void 0,void 0,function*(){o?(yield d(),e("native-device",r)):m(!c)}),props:{screenName:"produto",text:`Aproveite mais essa promo\xe7\xe3o no SuperApp Magalu - ${r.title} ${r.url}`}})}},i.createElement("i",{className:"icon icon-share text-interaction-default font-md-regular"})),c&&i.createElement("div",{className:"pointer-events-auto absolute -bottom-2xsm right-3xlg flex items-center gap-2xsm rounded-full bg-on-interaction-lighter p-xsm shadow-on-surface-4 elevation-down-md"},s.map(t=>i.createElement(_.A,{as:"a",href:t.url,key:t.platform,onClick:()=>{var a;return a=t.platform,m(!1),void e(a,r)},target:"_blank"},i.createElement("i",{className:(0,n.y)("icon text-on-brand-default font-md-regular",t.icon)})))))},X=({alertOptions:e,item:t,mediaAssets:a,muted:r,onCloseAlert:l,onMuteButtonClick:s,onRedirectToCart:o,onShare:d,selectedIndex:u,showMuteButton:c})=>{var m,g;return i.createElement("div",{className:"pointer-events-none absolute inset-[0] flex flex-col items-start justify-between"},i.createElement("div",{className:"m-md flex items-center gap-2xsm rounded-full bg-surface-container-lowest px-sm py-xsm text-on-surface-2"},i.createElement("i",{className:"icon icon-image font-xsm-regular"}),i.createElement("div",{className:"font-xsm-medium"},u+1,"/",a.length)),i.createElement("div",{className:"flex w-full flex-col"},e&&i.createElement(M,{image:e.image,onClose:l,onRedirectToCartClick:o,status:e.status}),i.createElement("div",{className:"flex items-end justify-between gap-xlg px-md pb-lg pt-md xl:justify-end"},i.createElement("p",{className:"text-on-surface-10 font-xsm-regular xl:hidden"},t.title),i.createElement("div",{className:"flex flex-col gap-xsm"},c&&i.createElement(_.A,{"aria-label":"sem \xe1udio",className:"pointer-events-auto !size-[36px] border-none bg-surface-container-lowest hover:bg-surface-container-lowest",onClick:s},i.createElement("i",{className:(0,n.y)(r?"icon-audio-down":"icon-audio-up","icon text-interaction-default font-md-regular")})),i.createElement(F,{onShare:d,path:null!=(m=t.path)?m:"",title:null!=(g=t.title)?g:""})))))};var V=({alertOptions:e,buyButtonDisabled:t,initialIndex:a,item:l,mediaAssets:n,onAddToCart:c,onClose:m,onCloseAlert:g,onRedirectToCart:p,onShare:v,onVideoCartInteraction:f,onVideoInteraction:h,videoHost:b})=>{let E=n.find(e=>"image"===e.type),y=(0,d.A)(u.vA),[A,S]=(0,i.useState)(a||0),[N,w]=(0,i.useState)(!1),[T,O]=(0,i.useState)(x(n[a])),C=e=>{null==h||h(Object.assign(Object.assign({},e),{item_id:l.id}))};return i.createElement(o.A,{closeButtonClass:"top-md right-md !h-[36px] !w-[36px] [&>i]:text-on-surface-10 !bg-[#51585CB2] !hover:bg-[#51585CB2]",onClose:m,paperClass:"!rounded-[0] !w-dvh !h-dvh",position:"full",showClose:!1,visible:!0},i.createElement("div",{className:"flex size-full flex-col bg-on-surface-1"},i.createElement("div",{className:"relative h-[calc(100%-78px)] w-full md:size-full"},i.createElement(r.A,{className:"size-full",contentWrapper:!0,currentIndex:A,onChange:e=>{S(e),O(x(n[e]))},showArrowControls:!0,transitionDurationSec:300},n.map((e,t)=>{var a;let{src:r,type:n}=e,o="video"===n&&r.includes("magalu-videos");return i.createElement("div",{className:"relative flex size-full items-center justify-center ",key:r},"audio"===n&&i.createElement(D,{active:t===A,bgImage:null!=(a=null==E?void 0:E.src)?a:"",muted:N,src:r,type:"audio"}),"video"===n&&o&&i.createElement(D,{active:t===A,muted:N,onVideoInteraction:C,src:r,type:"video",videoHost:b}),"video"===n&&!o&&i.createElement("div",{className:"w-full xl:w-[70%]"},i.createElement(s,{autoplay:1,mute:1,ratio:"video",src:r,title:"Video embed"})),"image"===n&&i.createElement(j,{alt:`Imagem de ${l.title}`,src:r}))})),i.createElement(X,{alertOptions:e,item:l,mediaAssets:n,muted:N,onCloseAlert:g,onMuteButtonClick:()=>w(!N),onRedirectToCart:p,onShare:v,selectedIndex:A,showMuteButton:T})),y&&i.createElement("div",{className:"flex-1 p-md"},i.createElement(I,{buyButtonDisabled:t,item:l,onAddToCart:c,onVideoCartInteraction:f}))))}},32706:(e,t,a)=>{a.d(t,{A:()=>y});var i=a(80594),r=a(20766),l=a(7750),n=a(25378),s=a(53239),o=a(17016),d=a(31642),u=a(2092),c=a(45174),m=a(69279),g={headerImage:()=>"max-h-[300px] min-h-[120px] w-full object-cover",sellerBox:()=>"relative min-w-full flex gap-md flex-[1]",sellerButtons:()=>(0,m.y)("flex items-center gap-xsm","p-xsm pl-sm pr-sm","font-xsm-bold","rounded-[32px]"),sellerFlex:()=>(0,m.y)("w-full min-h-[94px]","flex flex-wrap items-center gap-md p-md","bg-surface-container-lowest"),sellerInfoBox:()=>"flex flex-col flex-[1] gap-2xsm",sellerLogoImage:()=>(0,m.y)("w-[48px] h-[48px] min-w-[48px] min-h-[48px] object-cover","border-thin border-solid border-surface-container-mid rounded-sm","overflow-hidden"),sellerOficalStoreBox:()=>"flex gap-xsm",sellerValuesBox:()=>"flex items-center gap-xsm"};let p=({colors:e,followersAmount:t,headerImageSrc:a,isChatEnabled:i,oficialStore:r,salesAmount:l,sellerButtons:n,sellerId:m,sellerLogoSrc:p,sellerName:v})=>{let{colorPrimary:f,colorSecondary:h}=e,b={backgroundColor:f,borderColor:f,color:h},E=new URL(`https://m.magazineluiza.com.br/lojista/${m}?partner_id=64853&utm_source=seller_page_mobile&utm_medium=share`).toString();return s.createElement("div",{className:"flex flex-wrap items-center"},s.createElement("img",{alt:v,className:g.headerImage(),src:a}),s.createElement("div",{className:g.sellerFlex()},s.createElement("div",{className:g.sellerBox()},s.createElement("img",{alt:v,className:g.sellerLogoImage(),src:p}),s.createElement("div",{className:g.sellerInfoBox()},s.createElement("p",{className:"font-md-medium"},v),r&&s.createElement("div",{className:g.sellerOficalStoreBox()},s.createElement("p",{className:"font-2xsm-medium"},"Loja oficial no Magalu"),s.createElement(o.SV_,{className:"text-brand-default",height:"16px",width:"16px"})),s.createElement("div",{className:g.sellerValuesBox()},t&&s.createElement("div",{className:g.sellerValuesBox()},s.createElement("p",null,`+ ${t} seguidores`),s.createElement("span",{className:"flex h-[4px] w-[4px] rounded-[4px] bg-surface-container-high"})),l&&s.createElement("p",null,`${l} vendas`)))),s.createElement("div",{className:g.sellerValuesBox()},i&&s.createElement(s.Fragment,null,n.onSellerChatClick&&s.createElement(d.A,{className:g.sellerButtons(),onClick:n.onSellerChatClick,startIcon:(0,c.A)("chat",{className:"font-lg-bold"}),style:b},"Fale com lojista"),n.onSellerFollowClick&&s.createElement(d.A,{className:g.sellerButtons(),onClick:n.onSellerFollowClick,startIcon:s.createElement("span",{className:`icon ${n.isFollowing?"icon-check":"icon-add"} font-lg-bold`,"data-testid":"follow-icon"}),style:b},n.buttonLabel)),s.createElement(u.A,{className:"relative",shareData:{text:`Vem conferir todas as novidades da loja ${v}`,title:"O que \xe9 bom merece ser compartilhado!",url:E},socialPlatforms:[{icon:"icon-facebook",platform:"facebook",url:"https://m.facebook.com/sharer/sharer.php?u={url}"},{icon:"icon-twitter-x-skin",platform:"twitter",url:"https://twitter.com/intent/tweet?text={title}&url={url}"},{icon:"icon-whatsapp",platform:"whatsapp",url:"https://wa.me/?text={url}"},{icon:"icon-mail",platform:"email",url:"mailto:?subject={title}&body={desc}%20{url}"}],socialShareContainerClass:i?"":"right-auto",style:b,useNativeWebShare:!0,variation:"circle"}))))};var v=a(91020),f=a(23164),h=a(52872),b=a(45900),E=a(35853);a(20533),a(79561),a(38863);let y=({data:e,enableChatToggle:t=!0,sellerInfo:a})=>{var o,d,u,c,m,g,y;let{useNavigation:x}=(0,n.xo)(),{publish:A}=(0,l.LJ)(),S=(0,r.rd)(),N=(0,b.A)(),{search:w,sellerPage:T}=e||{},I=()=>{var e,t;return null==(t=null==(e=null==w?void 0:w.items)?void 0:e[0])?void 0:t.offers[0].seller},{resultCustomerFollower:O}=(0,f.A)({customerId:null==(o=null==e?void 0:e.userInfo)?void 0:o.customerId,sellerId:null==(d=I())?void 0:d.id}),C=(null==(u=I())?void 0:u.isChatEnabled)&&t,{fetchSetFollower:R}=(0,v.A)(),D=(null==O?void 0:O.isFollowing)?"Seguindo":"Seguir",P=(null==O?void 0:O.isFollowing)||!1,k=!!(null==(c=null==e?void 0:e.userInfo)?void 0:c.customerId);return s.createElement(p,{colors:(()=>{var e,t;return{colorPrimary:(null==(e=null==T?void 0:T.style)?void 0:e.colorPrimary)||(null==a?void 0:a.colorPrimary),colorSecondary:(null==(t=null==T?void 0:T.style)?void 0:t.colorSecondary)||(null==a?void 0:a.colorSecondary)}})(),headerImageSrc:(null==T?void 0:T.header.coverImage.mobile)||(null==a?void 0:a.headerImageSrc),isChatEnabled:C,oficialStore:null==T?void 0:T.isOficialStore,salesAmount:(0,E.A)((()=>{var e;return null==(e=null==T?void 0:T.stats)?void 0:e.totalSales})()||(null==(g=null==(m=I())?void 0:m.stats)?void 0:g.totalSales)||0),sellerButtons:{buttonLabel:D,isFollowing:P,onSellerChatClick:(null==a?void 0:a.showButtons)?()=>{A("seller:info:selectcontent:chatSeller:click",{value:{contentType:`seller:${a.id}`}}),x({data:{seller_id:a.id},fallback:()=>{S.push((0,h.l)({baseUrl:N,sellerId:a.id}))},type:"chat_seller"})}:void 0,onSellerFollowClick:(null==a?void 0:a.showButtons)&&k?()=>(0,i.sH)(void 0,void 0,void 0,function*(){(null==O?void 0:O.customerId)&&(null==O?void 0:O.sellerId)&&(yield R({customerId:O.customerId,followSeller:!P,sellerId:O.sellerId}),A("seller:info:selectcontent:followSeller:click",{value:{contentId:P?"nao-seguir":"seguir",contentType:`informacoes-lojista:${O.sellerId}`}}))}):void 0},sellerId:a.id,sellerLogoSrc:(null==T?void 0:T.logoUrl)||(null==a?void 0:a.sellerLogoSrc),sellerName:(()=>{var e,t,a,i,r;return(null==(r=null==(i=null==(a=null==(t=null==(e=null==w?void 0:w.items)?void 0:e[0])?void 0:t.offers)?void 0:a[0])?void 0:i.seller)?void 0:r.name)||(null==T?void 0:T.legalName)})()||(null==(y=I())?void 0:y.legalName)||""})}},36514:(e,t,a)=>{a.d(t,{A:()=>r});var i=a(53239);let r=()=>i.createElement("hr",{className:"h-[5px] w-full border-none bg-rainbow-gradient"})},36656:(e,t,a)=>{a.d(t,{Ay:()=>s});var i=a(67249),r=a.n(i),l=a(69732);let n={CLICKS:"clicks",IMPRESSIONS:"views"},s=(e,t)=>{var a;let i=(0,l.tH)(),s=null==(a=null==t?void 0:t.categories)?void 0:a.filter(Boolean);function o(a){return function(l){i.mutate({mutation:r(),variables:{input:l.map(({additionalAttribution:i,adType:r,position:l,trackId:n})=>({additionalAttribution:i,adType:r,customerId:e||"1234_anonymous2",eventDate:(new Date).toISOString(),placement:t?Object.assign({path:(null==t?void 0:t.placement)?[t.channel,t.device,t.page,t.placement].join("/").toLowerCase():[t.channel,t.device,t.page,t.slot].join("/").toLowerCase(),position:(null==t?void 0:t.position)||l},(null==s?void 0:s.length)?{categoryId:s}:{}):null,trackId:n,type:a}))}}).then(({data:{sendAdsEvent:e},errors:t})=>{if(t&&Object.keys(t).length)for(let e of Object.values(t))return console.error(`[SendAdsEvents] - ${e}`);if(e&&!String(null==e?void 0:e.status).match(/2\d\d/))return console.error("[SendAdsEvents] - Error sending data")}).catch(e=>{console.error(`[SendAdsEvents] - ${e}`)})}}return{sendAdsClickEvents:o(n.CLICKS),sendAdsImpressionEvents:o(n.IMPRESSIONS)}}},38064:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(80594),r=a(53239),l=a(69279);let n=e=>{var t,{data:a,layout:n="vertical"}=e,s=(0,i.Tt)(e,["data","layout"]);return r.createElement("table",Object.assign({className:"w-full list-none","data-testid":"table-factsheet"},s),r.createElement("tbody",null,null==(t=null==a?void 0:a.elements)?void 0:t.map((e,t)=>r.createElement("tr",{className:(0,l.y)("text-on-surface-3","horizontal"===n?"even:bg-surface-container-lower":""),key:`${e.keyName} + ${t}`},r.createElement("td",{className:(0,l.y)("px-md py-sm align-top font-xsm-bold","horizontal"===n?"table-cell w-1/2":"list-item w-full bg-surface-container-lower"),"data-testid":"table-factsheet-key"},e.keyName),r.createElement("td",{className:"list-item w-full px-md py-sm align-top font-xsm-regular"},e.isLink?r.createElement("a",{className:"underline hover:text-interaction-default",href:e.path},null==e?void 0:e.value):null==e?void 0:e.value)))))}},38157:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(80594),r=a(53239),l=a(69279);let n=(0,r.forwardRef)(function(e,t){var{children:a,className:n,onChange:s,selected:o,value:d}=e,u=(0,i.Tt)(e,["children","className","onChange","selected","value"]);return r.isValidElement(a)?r.createElement("div",Object.assign({"aria-selected":o,className:(0,l.y)(o?"selected tab":"tab",n),onClick:e=>{s&&s(e,d||"")},ref:t,role:"tab"},u),a):null})},38804:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(53239),r=a(29504);let l=({data:e})=>{let{alerts:t=[]}=e||{};return i.createElement(i.Fragment,null,null==t?void 0:t.map((e,t)=>i.createElement(r.A,{className:"mx-md mt-md text-wrap",intent:e.intent,key:t,message:e.message})))}},39180:(e,t,a)=>{a.d(t,{A:()=>r});var i=a(80594);let r=()=>({getOffersWithShipping:(e,t)=>(0,i.sH)(void 0,[e,t],void 0,function*({getShipping:e,parseShippingVariables:t},{config:a,data:r}){let{item:l}=r,{location:n,organizationId:s,salesChannelId:o,sellerPagePath:d,toggleAutoShipping:u="AUTO"}=a;return Promise.all(((null==l?void 0:l.offers)||[]).map(r=>(0,i.sH)(void 0,void 0,void 0,function*(){var c;let m=null==(c=null==r?void 0:r.seller)?void 0:c.id,{deliveryTypes:g,error:p,shippings:v}=yield(0,i.sH)(void 0,void 0,void 0,function*(){var i,d;if(!(null==n?void 0:n.zipCode)||"DISABLED"===u)return{};let{data:{shippings:c},error:m}=yield e(t({config:{organizationId:s,salesChannelId:o},cookies:{location:n},item:Object.assign(Object.assign({},l),{offers:[r]}),route:a.route}));return{deliveryTypes:null==(d=null==(i=null==c?void 0:c[0])?void 0:i.packages)?void 0:d[0].deliveryTypes,error:m,shippings:c}});return{deliveryTypes:g,error:p,href:`${d}${m}/`,itemOffer:r,shippings:v}})))})})},39540:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(38863),r=a(53239);let l=({currentPage:e=1,userReviews:t})=>{let[a,l]=(0,r.useState)(""),[n,s]=(0,r.useState)(!0),{page:{totalPages:o=1}}=t;return(0,r.useEffect)(()=>{var t;let a=e+1,r=e<o;s(r),r&&l((t=a.toString(),(0,i.Ti)({page:t})))},[e,o,t]),{nextPagePath:a,showPaginateButton:n}}},40545:(e,t,a)=>{a.d(t,{A:()=>u});var i=a(80594),r=a(76873),l=a.n(r),n=a(69732),s=a(53239);let o="Ocorreu um erro. Por favor tente novamente.",d={NOT_FOUND:o},u=()=>{let e=(0,n.tH)(),[t,a]=(0,s.useState)(),[r,u]=(0,s.useState)();return{data:r,error:t,subscribeToLetMeKnow:function(t){return(0,i.sH)(this,arguments,void 0,function*({email:t,name:i,newsletter:r,origin:n,sku:s}){var c,m,g;try{let p=yield e.mutate({mutation:l(),variables:{email:t,name:i,newsletter:r,origin:n,sku:s}}),{status:v}=(null==(c=null==p?void 0:p.data)?void 0:c.addLetMeKnow)||{};return["NOT_FOUND","OK"].includes(v)?u(null==(m=null==p?void 0:p.data)?void 0:m.addLetMeKnow):a(d[v]||o),(null==(g=null==p?void 0:p.data)?void 0:g.addLetMeKnow)||{}}catch(e){return a(o),null}})}}}},41346:(e,t,a)=>{a.d(t,{A:()=>s});var i=a(80594),r=a(53239),l=a(80004),n=a(69279);let s=e=>{var{className:t,items:a,onClickItem:s}=e,o=(0,i.Tt)(e,["className","items","onClickItem"]);return r.createElement("nav",Object.assign({className:(0,n.y)("flex justify-around gap-xsm overflow-y-hidden py-xsm",t)},o),a.map((e,t)=>r.createElement("a",{className:"flex flex-col items-center",href:e.link,key:`${e.text}-${t}`,onClick:t=>s(t,e)},r.createElement("div",{className:"box-border flex items-center justify-center overflow-hidden rounded-[50%] bg-surface-container-lowest sm:mx-xsm sm:mb-2xsm sm:h-[53px] sm:w-[53px] md:mx-[0px] md:mb-xsm md:h-[90px] md:w-[90px]"},r.createElement(l.A,{alt:e.text,className:"h-full	object-contain",src:e.image})),r.createElement("p",{className:"leading-tight line-clamp-2 text-center text-on-surface-1 sm:font-3xsm-regular md:font-2xsm-regular lg:font-xsm-regular"},e.text))))}},41829:(e,t,a)=>{a.d(t,{Ib:()=>E,L6:()=>v,MS:()=>s,OD:()=>b,Pm:()=>u,Q_:()=>m,SJ:()=>d,V$:()=>l,Xj:()=>h,Y8:()=>f,Z2:()=>y,hL:()=>r,hq:()=>g,i_:()=>i,qi:()=>c,qm:()=>p,rG:()=>o,wT:()=>n});let i=["image","video"],r=["bmp","jpeg","jpg","heic","heif","png"],l=["mov","mp4","quicktime"],n=1e3,s=2,o=1e7,d=1,u=1e8,c="Arquivo inv\xe1lido. N\xe3o h\xe1 suporte para o tipo ou formato.",m="Muito insatisfeito",g="Insatisfeito",p="Neutro",v="Satisfeito",f="Muito satisfeito",h="Escolha de 1 a 5 estrelas para classificar",b=1,E=3,y={image:{countError:"S\xf3 \xe9 permitido enviar no m\xe1ximo 2 imagens.",maxCount:2,maxSize:1e7,ref:"fileInputPhotoRef",sizeError:"N\xe3o \xe9 poss\xedvel enviar imagens com mais de 10MB.",type:"image"},video:{countError:"S\xf3 \xe9 permitido enviar no m\xe1ximo 1 v\xeddeo.",maxCount:1,maxSize:1e8,ref:"fileInputVideoRef",sizeError:"N\xe3o \xe9 poss\xedvel enviar v\xeddeo com mais de 100MB.",type:"video"}}},47121:(e,t,a)=>{a.d(t,{P:()=>s});var i=a(80594),r=a(48189),l=a(53239),n=a(58874);let s=()=>{let[e,t]=(0,l.useState)(r.c0.getState().data.userInfo||null),a=(0,l.useCallback)(e=>r.c0.getState().setNestedValue("data.userInfo",e),[]);return r.c0.subscribe(e=>e.data.userInfo,e=>{t(e)}),{refreshData:(0,l.useCallback)(()=>(0,i.sH)(void 0,void 0,void 0,function*(){let t=yield(0,n.Sk)();(null==t?void 0:t.userInfo)&&(null==t?void 0:t.userInfo.id)!==(null==e?void 0:e.id)&&a(t.userInfo)}),[a,null==e?void 0:e.id]),user:e}}},49002:(e,t,a)=>{a.d(t,{DU:()=>g,NW:()=>o,QA:()=>s,RZ:()=>d,Uq:()=>m,Wj:()=>c,sC:()=>u,w4:()=>l});var i=a(68841);let r=["MO","EP","CM","UD","ME"],l=(e=[])=>{let t=[];return e.forEach(e=>{(null==e?void 0:e.id)&&t.push(e.id)}),[...new Set(t)].slice(0,5)},n=(e,t)=>{var a;let{categories:i,channel:r,consumer:l,entities:n,hasEntity:s,limit:o=1,placement:d,slot:u,slots:c}=e,m=[];Array.isArray(c)&&(m=c),u&&!Array.isArray(c)&&(m=[{slot:u}]);let g=m.length?m.filter(e=>e.slot&&!t.has(e.slot)):[],p=null==(a=(null==n?void 0:n.length)?n:i)?void 0:a.filter(Boolean);g.forEach(e=>{s?t.set(e.slot,Object.assign({channel:r,consumer:l,entities:p,hasEntity:s,limit:o,placement:d},e)):t.set(e.slot,Object.assign({categories:i,channel:r,consumer:l,limit:o,placement:d},e))})},s=({customerId:e,data:t,zipcode:a})=>{var s,o,d,u,c,m;let g=new Map,p=new Map,{ads:v}=t,{banners:f,channelCode:h="",partnerId:b="",showcases:E}=v;(null==f?void 0:f.length)&&f.forEach(e=>n(e,g)),(null==E?void 0:E.length)&&E.forEach(e=>n(e,p));let{category:y={}}=(null==t?void 0:t.item)||{},x=[null==(s=null==t?void 0:t.item)?void 0:s.id].filter(Boolean),{get:A}=(0,i.A)("viewing-history"),S=A(),N=(null==(o=null==S?void 0:S.items)?void 0:o.map(e=>{var t;return null==(t=null==e?void 0:e.category)?void 0:t.id}))||[],w=[],T=[],I=null==(u=null==(d=null==t?void 0:t.item)?void 0:d.category)?void 0:u.subcategories,O=(({category:e,categoryPageId:t="",productSubcategories:a=[],viewedProducts:i=[]})=>(null==a?void 0:a.length)?l(a):(null==e?void 0:e.id)?[e.id]:(null==t?void 0:t.length)?[t]:i.length?[...new Set(i)].slice(-5):r)({category:y,categoryPageId:(null==(m=null==(c=null==t?void 0:t.category)?void 0:c[0])?void 0:m.id)||"",productSubcategories:I,viewedProducts:N}).filter(Boolean);return Array.from(p.values()).forEach(({consumer:e,entities:a,hasEntity:i,limit:r,placement:l,slot:n})=>{var s,o;let d=null==(o=(null==a?void 0:a.length)&&(null==(s=t.item)?void 0:s.entity)?a:O)?void 0:o.filter(Boolean);return i?w.push({consumer:e,entities:d,limit:r,placement:l,slot:n}):w.push({categories:O,consumer:e,limit:r,placement:l,slot:n})}),Array.from(g.values()).forEach(({categories:e,consumer:t,limit:a,slot:i})=>T.push({categories:e,consumer:t,limit:a,slot:i})),w.length||T.length?Object.assign(Object.assign(Object.assign(Object.assign({},T.length&&{banners:T}),{metadata:{channelCode:h,customerId:e,isLoyalty:!1,partnerId:b},omitProductIds:x}),w.length&&{products:w}),{zipcode:a}):void 0},o=e=>e&&e.length?e.reduce((e,t)=>((e[t.slot]=e[t.slot]||[]).push(t),e),{}):{},d=e=>e&&e.length?e.reduce((e,t)=>((e[t.slot]=e[t.slot]||[]).push(t),e),{}):{},u=e=>e&&e.length?e.reduce((e,t)=>(e[t.slotId]=t,e),{}):{},c=({fillrate:e,props:t,showcases:a})=>{var i,r,l,n;let s=a&&Array.isArray(a)&&a.length,o=s?Array.from(new Set(a.flatMap(({item:e})=>{var t,a;return[null==(t=null==e?void 0:e.category)?void 0:t.id,null==(a=null==e?void 0:e.subcategory)?void 0:a.id].filter(e=>!!e)}))):[];return{adType:"SPONSORED_PRODUCT",channel:t.channel||"",eventId:e.eventId,page:t.page||"",placement:e.placement,received:{categories:o,clientAdsAmount:s?a.length:0,serverAdsAmount:null==(i=e.received)?void 0:i.serverAdsAmount,skus:s?Array.from(new Set(a.map(({item:e})=>null==e?void 0:e.id).filter(e=>!!e))):[]},requested:{categories:null==(r=e.requested)?void 0:r.categories,clientAdsAmount:t.limit||0,serverAdsAmount:null==(l=e.requested)?void 0:l.serverAdsAmount,skus:null==(n=e.requested)?void 0:n.skus}}},m=(e,t)=>[{position:t,trackId:e}],g=(e,t)=>{var a;return(null==(a=null==e?void 0:e.query)?void 0:a[t])?e.query[t]:new URLSearchParams(window.location.search).get(t)||void 0}},49296:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var i=a(53239),r=a(69279);let l=({children:e,className:t="",orientation:a="horizontal",position:l,thickness:n="thin"})=>{let s={medium:"border-2",none:"border-0",thick:"border-4",thicker:"border-8",thin:"border-1"},o=s[n]||s.thin,d=(0,r.y)("horizontal"===a?`border-t ${o} w-full`:`border-l ${o} h-full`,"vertical"===a?"right"===l?"ml-auto":"mr-auto":"","border-on-surface-8","rounded-[0px]",t);return i.isValidElement(e)?i.cloneElement(e,{className:(0,r.y)(d,e.props.className||"")}):i.createElement("div",{className:d},e)}},51885:(e,t,a)=>{a.d(t,{A:()=>c});var i=a(53239),r=a(69279),l=a(9696),n=a(80594),s=a(59737);let o=e=>{var{className:t,question:a}=e,r=(0,n.Tt)(e,["className","question"]);let{answer:o,answerCreatedAt:d,question:u}=a;return i.createElement("div",Object.assign({className:`px-md ${t}`},r),i.createElement(l.A,{as:"h3",className:"my-xsm text-on-surface-2 font-sm-medium"},u),i.createElement("div",{className:"my-xsm flex"},i.createElement("i",{className:"icon icon-arrow-down-right text-on-surface-6 font-xsm-regular"}),i.createElement("div",{className:"inline-block w-full break-words text-on-surface-2 font-xsm-regular"},o)),i.createElement("p",{className:"mb-md ml-sm mt-xsm text-on-surface-3 font-2xsm-regular","data-testid":"answer-date"},(0,s.A)(new Date(d),new Date)))},d=({showCount:e,title:t,totalQuestions:a})=>i.createElement(i.Fragment,null,i.createElement(l.A,{as:"h2",className:"text-on-surface-2 font-lg-medium"},t),e&&i.createElement("p",{className:"mt-2xsm text-on-surface-3"},`${a} perguntas respondidas`)),u=({emptyPhrase:e,questions:t})=>0===t.length?i.createElement(l.A,{as:"h3",className:"mb-xsm mt-2xsm text-on-surface-3 font-xsm-medium","data-testid":"empty-questions"},e):i.createElement("div",null,t.map((e,a)=>i.createElement(o,{className:(0,r.y)("border-b-on-surface-8",a!==t.length-1&&"border-b"),"data-testid":"questions-list-block",key:e.id,question:e}))),c=i.forwardRef(({className:e,emptyPhrase:t,questions:a=[],title:l,totalQuestions:n},s)=>{let o=0===a.length;return i.createElement("div",{className:(0,r.y)(!o&&"md:gap-x-4 flex flex-col gap-md pt-sm md:grid md:grid-cols-[2fr_3fr]",e),"data-testid":"questions-list",ref:s},i.createElement("div",null,i.createElement(d,{showCount:!o,title:l,totalQuestions:n})),i.createElement(u,{emptyPhrase:t,questions:a}))})},54861:(e,t,a)=>{a.d(t,{A:()=>s});var i=a(53239),r=a(51520),l=a(69279),n=a(45174);let s=({items:e,onCloseBottomSheet:t,subTitle:a,title:l,visible:n=!1})=>i.createElement(r.A,{contentStyle:"md:!pt-[0px]",headerStyle:"md:!border-none",onClose:t,slot:{bottomSheetContainer:{className:"md:!max-h-min"}},title:l,titleStyle:"font-md-bold text-on-surface-3",visible:n},a&&i.createElement("p",{className:"pb-md text-interaction-default font-sm-regular md:pb-[0]"},a),e.map((e,t)=>i.cloneElement(e,{key:t})));s.Item=({icon:e,text:t})=>i.createElement("div",{className:"my-lg flex items-center gap-sm md:my-md"},e&&(0,n.A)(e,{className:"flex justify-center font-xlg-regular text-on-surface-4","data-testid":"benefit-modal-item-icon"}),"string"==typeof t?i.createElement("p",{className:(0,l.y)("font-xsm-regular","text-on-surface-3"),"data-testid":"benefit-modal-item-text"},t):t)},55854:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(80594),r=a(53239),l=a(17402),n=a(80004),s=a(89508);let o=({banners:e,defaultImages:t,intervalSec:a=3e3,onClick:o,transitionDurationSec:d=2e3})=>{let u=(0,s.A)(),c=(e,t,a)=>r.createElement("div",{className:(0!==t?"ml-xsm":"")+" pointer pointer-events-auto","data-testid":"carousel-item",key:`${e}-${t}`,onClick:()=>a&&void o(a,t)},r.createElement("div",{className:"h-full max-h-[145px] min-h-[120px] w-full overflow-hidden rounded-lg sm:min-h-[135px] md:max-h-[238px] md:min-h-[238px]"},r.createElement(n.A,{alt:"carrossel de banners p\xe1gina do seller",className:"h-full w-full object-cover",decoding:t?"auto":"sync",fetchPriority:t?"low":"high",loading:t?"lazy":"eager",src:e})));return r.createElement(l.A,Object.assign({},{auto:!0,contentWrapper:!1,insideControls:!1,intervalSec:a,loopOn:!0,showArrowControls:!1,showControls:!1,transitionDurationSec:d},{showPartial:!0,showPartialNextSlide:!0}),e.length?e.map((e,t)=>{var{images:a}=e,r=(0,i.Tt)(e,["images"]);return c(u?null==a?void 0:a.mobile:null==a?void 0:a.desktop,t,r)}):t.map((e,t)=>c(e,t)))}},57409:(e,t,a)=>{a.d(t,{A:()=>s});var i=a(80594),r=a(53967),l=a.n(r),n=a(69732);let s=e=>{let t=(0,n.tH)();return{getEligibleProductServices:function(a){return(0,i.sH)(this,void 0,void 0,function*(){try{let{data:i}=yield t.query({context:{timeout:null==e?void 0:e.timeout},fetchPolicy:"no-cache",query:l(),variables:{request:{sku:a.sku}}});return{data:i,error:null}}catch(e){return{data:null,error:e.message||"Something went wrong"}}})}}}},58556:(e,t,a)=>{a.d(t,{A:()=>d});var i=a(53239),r=a(54861),l=a(80594),n=a(24977),s=a(69279);let o=({className:e,direction:t="horizontal",offers:a,onCardClick:r})=>{let o="horizontal"===t,d=o?"mb-sm text-brand-default font-xsm-regular underline":"font-2xsm-bold",u=o?e=>{var{children:t}=e,a=(0,l.Tt)(e,["children"]);return i.createElement("p",Object.assign({},a,{"data-testid":"benefit-card-title"}),t)}:e=>{var{children:t}=e,a=(0,l.Tt)(e,["children"]);return i.createElement("span",Object.assign({},a,{"data-testid":"benefit-card-title"}),t)};return i.createElement(i.Fragment,null,i.createElement(n.A,{className:(0,s.y)("flex cursor-pointer gap-md rounded-md border-thin border-solid border-surface-container-low px-xsm py-md",!o&&"flex-col",e),"data-testid":"benefits-cards",horizontal:o,scale:"medium"},null==a?void 0:a.map(({description:e,icon:t,id:a,label:l,title:c})=>i.createElement(n.A.Item,{"data-testid":`benefit-card-${a}`,endIcon:!o&&i.createElement("i",{className:"icon icon-chevron-right flex shrink-0 justify-center text-interaction-default [font-size:24px]","data-testid":"chevron-icon"}),key:a,onClick:e=>((e,{id:t,label:a,title:i})=>{e.preventDefault(),r&&r({id:t,label:a,title:i})})(e,{id:a,label:l,title:c}),spacing:"gap-xsm !px-[0] !py-[0]",startIcon:i.createElement("div",{className:o?"min-w-[60px]":"flex min-w-[40px] items-center justify-center","data-testid":"benefit-card-icon"},i.createElement("i",{className:`icon icon-${t} flex items-center justify-center text-interaction-default font-lg-regular`}))},i.createElement("div",{className:(0,s.y)("font-2xsm-regular",!o&&"text-on-surface-2"),"data-testid":"benefit-card-text"},i.createElement(u,{className:d},c),e)))))},d=({className:e,direction:t,idSelected:a,offers:l,onBenefitBottomSheetClosed:n,onBenefitClick:s})=>{let[d,u]=i.useState(a||"");return(0,i.useEffect)(()=>{u(a||"")},[a]),l?i.createElement(i.Fragment,null,i.createElement(o,{className:e,direction:t,offers:l,onCardClick:({id:e,label:t,title:a})=>{s&&s({id:e,label:t,title:a}),u(e)}}),l.map(e=>{var t,a,l,s;return(null==(t=e.content)?void 0:t.items)?i.createElement(r.A,{items:null==(a=e.content)?void 0:a.items,key:e.id,onCloseBottomSheet:()=>{var t;return t=e.id,n&&n({id:t}),void u("")},subTitle:null==(l=e.content)?void 0:l.subTitle,title:null==(s=e.content)?void 0:s.title,visible:e.id===d}):null})):null}},58908:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(53239),r=a(33581);let l=({debounceDelay:e=150,hasNextPage:t,loading:a,onLoadMore:l,scrollContainerRef:n,threshold:s=80})=>{let o=(0,r.A)(()=>{let e=n.current;if(!e||a||!t)return;let{clientHeight:i,scrollHeight:r,scrollTop:o}=e;!(r<=i)&&o/(r-i)*100>s&&l()},e);(0,i.useEffect)(()=>{let e=n.current;if(e)return e.addEventListener("scroll",o),()=>{e.removeEventListener("scroll",o)}},[n,o]),(0,i.useEffect)(()=>{let e=n.current;e&&!a&&t&&e.scrollHeight<=e.clientHeight&&l()},[a,t,n,l])}},61594:(e,t,a)=>{a.d(t,{A:()=>c});var i=a(53239),r=a(69279),l=a(44188),n=a(80004),s={imageSelector:({available:e,disabled:t,selected:a})=>(0,r.y)("flex-[0_0_auto]","border-on-surface-7","rounded-sm","cursor-pointer","box-border","ring-inset","hover:ring-2","bg-surface-container-lowest",a?"ring-2 ring-interaction-default":"ring-1 ring-on-surface-7",(a||t)&&"pointer-events-none cursor-none",(!e||t)&&"opacity-40"),scrollContainer:(0,r.y)("flex","snap-mandatory","flex-nowrap","gap-xsm","overflow-x-auto","py-xsm","pl-md","pr-md","hidden-scrollbar"),scrollIcon:({direction:e})=>(0,r.y)("absolute","top-[50%]","h-full","w-lg","-translate-y-[50%]","content-center","text-on-surface-3","opacity-90","bg-surface-container-lowest","z-10","font-lg-regular","before:block",..."left"===e?["left-[0]","icon-chevron-left","rounded-r-md"]:["right-[0]","icon-chevron-right","rounded-l-md"])},o=a(78095),d=a(12232);let u=({children:e,className:t})=>{let a=i.useRef(null),{hasScroll:l,isAtEnd:n,isAtStart:u,scrollHorizontally:c}=(0,d.A)(a);return i.createElement("div",{className:"relative"},!u&&i.createElement("i",{className:s.scrollIcon({direction:"left"}),"data-testid":"left-arrow",onClick:()=>c("left")}),i.createElement("div",{className:(0,r.y)("mt-xsm flex snap-mandatory flex-nowrap gap-xsm overflow-x-auto pl-md pr-md hidden-scrollbar",i.Children.count(e)<=o.ic&&!l&&"justify-center md:justify-start",t),"data-testid":"attribute-selector-container",ref:a},e),!n&&i.createElement("i",{className:s.scrollIcon({direction:"right"}),"data-testid":"right-arrow",onClick:()=>c("right")}))},c=({attributes:e=[],basePath:t="/",className:a="",hrefParser:d,onClick:c,productParentId:m,variationId:g})=>{let[p,v]=(0,i.useState)(m),[f,h]=(0,i.useState)((0,o.UP)(e)),[b,E]=(0,i.useState)((0,o.Uu)(e)),[y,x]=(0,i.useState)((0,o.hb)(e));return(0,i.useEffect)(()=>{m!==p?(v(m),h((0,o.UP)(e)),x((0,o.hb)(e)),E((0,o.Uu)(e))):h((0,o.f3)(e,f))},[g]),i.createElement("div",{className:a,"data-testid":"attribute-selector"},e.map(e=>i.createElement("div",{"data-testid":"attribute-type",key:`attribute-${e.type}`},i.createElement("div",{className:(0,r.y)("px-md pt-sm text-on-surface-2 font-xsm-regular md:pt-md",e.values.length<=o.ic&&"text-center md:text-start"),"data-testid":"attribute-label"},`${e.label} `,e.mandatory&&f[e.type]!==e.current?"":i.createElement("span",{className:"font-xsm-bold","data-testid":"attribute-value"},e.current)),i.createElement(u,{className:"color"===e.type?"mb-xsm":""},e.values.map(a=>{let o=`${t}${a.path}`,u=f[e.type]===a.value,m=!a.available,g="color"===e.type,p=a.path?"a":"button",v={"aria-label":`${e.label} ${a.value}`,"data-testid":"attribute-option",href:a.path&&d?d(o):o,onClick:(e=>t=>{let a=Object.assign(Object.assign({},(e=>{let t=y.indexOf(e),a=y.slice(t+1).filter(e=>b.includes(e));return Object.assign(Object.assign({},f),a.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:""}),{}))})(e.type)),{[e.type]:e.value});h(a),c&&c(t,Object.assign(Object.assign({},e),{path:t.currentTarget.getAttribute("href")}),a)})(Object.assign(Object.assign({},a),{type:e.type}))};return g?i.createElement(p,Object.assign({className:s.imageSelector({available:null==a?void 0:a.available,disabled:m,selected:u}),key:`value-${e.type}-${a.value}`},v),i.createElement(n.A,{alt:`cor ${a.value}`,className:"h-[64px] w-[64px] rounded-sm object-contain mix-blend-multiply",height:"64",loading:"eager",src:a.image,width:"64"})):i.createElement(l.A,Object.assign({as:p,className:(0,r.y)("text-nowrap text-on-surface-2",(u||m)&&"pointer-events-none cursor-none"),disabled:m,key:`value-${e.type}-${a.value}`,selected:u,size:"medium",variant:g&&u?"outline":"primary"},v),a.value)})))))}},66233:(e,t,a)=>{a.d(t,{A:()=>y});var i=a(53239),r=a(44188),l=a(94697),n=a(31642),s=a(7750),o=a(41829);let d=(e,t)=>t.reduce((t,a)=>a.type===e?t+1:t,0)>=("image"===e?o.MS:o.SJ),u=e=>o.Z2[e],c=(e,t)=>e.reduce((e,a)=>a.type===t?e+1:e,0),m=({selectedMedia:e,setSelectedMedia:t})=>{let{publish:a}=(0,s.LJ)(),[r,l]=(0,i.useState)({}),m={fileInputPhotoRef:(0,i.useRef)(null),fileInputVideoRef:(0,i.useRef)(null)},g=(e,t)=>{((e,t)=>{l(a=>{let i=Object.assign(Object.assign({},a),t);return t||delete i[e],i})})(e,t?{[e]:t}:void 0)},p=()=>{l({})},v=(a,i)=>{p();let r=c(e.shownMedia,"image"),l=c(e.shownMedia,"video");[...a.target.files].forEach(e=>{let[a,n]=e.type.split("/"),s=e.size;if("image"===a&&(r+=1),"video"===a&&(l+=1),((e,t,a)=>e===t&&(o.hL.includes(a)||o.V$.includes(a)))(i,a,n)){let d=((e,t,a)=>{let i=a<=u(e).maxCount,r=t<=u(e).maxSize;if(!i){let t=u(e);g(t.ref,t.countError)}if(!r){let t=u(e);g(t.ref,t.sizeError)}return i&&r})(a,s,"image"===a?r:l),c=((e,t)=>e===t&&o.i_.includes(t))(i,a),m=(e=>{var t;let a=null==(t=e.split(".").pop())?void 0:t.toLowerCase();return!!a&&(o.hL.includes(a)||o.V$.includes(a))})(n),v=s<=("image"===a?o.rG:o.Pm);c&&m&&v&&r<=o.MS&&l<=o.SJ&&d&&(p(),((e,a)=>{let i=new FileReader;i.onloadend=()=>{t(t=>({attachedMedia:[...t.attachedMedia,a],shownMedia:[...t.shownMedia,{type:e,url:i.result}]}))},i.readAsDataURL(a)})(a,e))}else g("fileInputPhotoRef",o.qi)})},f=(e,t)=>{var i,r,l,n;e.preventDefault(),"video"===t?(a("review:sendcontent:send-video",{value:{content_id:"enviar-foto"}}),null==(r=null==(i=m.fileInputVideoRef)?void 0:i.current)||r.click()):(a("review:sendcontent:send-image",{value:{content_id:"enviar-video"}}),null==(n=null==(l=m.fileInputPhotoRef)?void 0:l.current)||n.click())},h=e=>i.createElement("div",{className:"mb-xsm mt-xsm flex flex-col items-center"},i.createElement("span",{className:"icon icon-error-outline mr-xsm text-danger-default"}),i.createElement("p",{className:"text-center text-danger-default"},e));return i.createElement(i.Fragment,null,i.createElement("div",{className:"border-t-thin border-on-surface-8"},i.createElement("p",{className:"mb-md mt-lg flex flex-col items-center justify-center text-on-surface-2 font-xsm-medium lg:font-sm-medium"},"Compartilhe imagens do seu produto")),i.createElement(i.Fragment,null,i.createElement("input",{accept:"image/*","data-testid":"upload-img",hidden:!0,id:"image-upload",multiple:!0,onChange:e=>v(e,o.i_[0]),ref:m.fileInputPhotoRef,type:"file"}),i.createElement("input",{accept:"video/*","data-testid":"upload-video",hidden:!0,id:"video-upload",multiple:!0,onChange:e=>v(e,o.i_[1]),ref:m.fileInputVideoRef,type:"file"}),e.shownMedia.length>0&&i.createElement("div",{className:"mb-lg mt-md overflow-x-auto"},i.createElement("div",{className:"flex gap-sm"},e.shownMedia.map((e,a)=>i.createElement("div",{className:"relative flex flex-row",key:`attached-item-${a+1}`},"image"===e.type?i.createElement("img",{alt:`selected ${a+1}`,className:"h-[130px] min-h-[130px] w-[130px] min-w-[130px] rounded-md object-cover",id:"photo-uploader",src:e.url}):i.createElement("video",{className:"h-[130px] min-h-[130px] w-[130px] min-w-[130px] rounded-md object-cover",controls:!0,"data-testid":`video-uploader-${a+1}`,src:e.url}),i.createElement(n.A,{"aria-label":`remove-item-${a}`,centered:!0,className:"icon icon-close absolute right-[3%] top-[3%] size-[16px]\n                    rounded-full bg-surface-container-lowest p-[9px] hover:bg-surface-container-lowest","data-testid":"remove-button",onClick:e=>((e,a)=>{e.preventDefault(),t(e=>({attachedMedia:e.attachedMedia.filter((e,t)=>t!==a),shownMedia:e.shownMedia.filter((e,t)=>t!==a)})),m.fileInputPhotoRef.current.value="",m.fileInputPhotoRef.current.type="file",m.fileInputVideoRef.current.value="",m.fileInputVideoRef.current.type="file",p()})(e,a),size:"small",variant:"invisible"}))))),r.fileInputPhotoRef&&h(r.fileInputPhotoRef),r.fileInputVideoRef&&h(r.fileInputVideoRef)),i.createElement("div",{className:"mb-lg flex flex-col items-center justify-center lg:items-start"},i.createElement(n.A,{centered:!0,className:"mb-md","data-testid":"button-submit-photo",disabled:d("image",e.shownMedia),full:!0,onClick:e=>f(e,"image"),size:"large",startIcon:"icon-category-cf",variant:"outline"},"Enviar foto"),i.createElement(n.A,{centered:!0,className:"mb-md","data-testid":"button-submit-video",disabled:d("video",e.shownMedia),full:!0,onClick:e=>{f(e,"video")},size:"large",startIcon:"icon-category-fm",variant:"outline"},"Enviar v\xeddeo"),i.createElement("p",{className:"font-3xsm-regular lg:font-xsm-regular"},"Envie at\xe9 2 fotos (m\xe1x. 10MB cada) e 1 v\xeddeo (at\xe9 100MB)")))};var g=a(80594),p=a(60427);let v=i.forwardRef((e,t)=>{var{error:a,onChange:r,rating:l,value:n}=e,s=(0,g.Tt)(e,["error","onChange","rating","value"]);return i.createElement("div",{"data-testid":"rating-comment",ref:t},i.createElement("div",{className:"border-t-thin border-on-surface-8"},i.createElement("p",{className:"mb-md mt-lg flex flex-col items-center justify-center text-center text-on-surface-2 font-xsm-medium lg:font-sm-medium","data-testid":"rating-comment-label"},"O que voc\xea diria para ajudar outros clientes a decidir?")),i.createElement(p.A,Object.assign({},s,{"data-testid":"rating-comment-input",maxLength:1200,onChange:r,placeholder:"O que voc\xea achou desse produto?",value:n})),i.createElement("div",{className:"flex flex-row items-center justify-between"},l>=o.Ib&&!1!==(null==a?void 0:a.valid)?i.createElement("div",{className:"flex flex-row items-center"},i.createElement("span",{className:"icon icon-info mr-xsm text-on-surface-4"}),i.createElement("p",{className:"text-on-surface-4 font-2xsm-regular","data-testid":"rating-comment-optional"},"Opcional")):i.createElement("div",null),void 0!==(null==a?void 0:a.valid)?i.createElement("div",{className:"flex flex-row items-center","data-testid":"rating-comment-notification",role:"alert"},i.createElement("span",{className:"text-on-surface-4 font-2xsm-regular","data-testid":"rating-comment-error"},null==a?void 0:a.message)):i.createElement("p",{className:"text-on-surface-4 font-2xsm-regular"},"0 / 1200")))});var f=a(82729);let h=i.forwardRef((e,t)=>{var{label:a,score:r,variant:l}=e,n=(0,g.Tt)(e,["label","score","variant"]);return i.createElement("div",{className:"mb-lg mt-md flex flex-col items-center justify-center","data-testid":"rating-input",ref:t},i.createElement("div",{className:"large"===l?"flex flex-col items-center":"flex flex-row items-center justify-between"},i.createElement(f.A,Object.assign({"data-testid":"rating-input-stars",score:r,size:"large"===l?"large":"medium"},n)),i.createElement("p",{className:"mt-md text-center text-on-surface-3 font-xsm-regular","data-testid":"rating-input-label"},(e=>{var t;return null!=(t=({1:o.Q_,2:o.hq,3:o.qm,4:o.L6,5:o.Y8})[e])?t:o.Xj})(r))))});var b=a(98413);let E=({open:e,routeFunction:t,setOpen:a,variant:r})=>{let{publish:l}=(0,s.LJ)(),o={ERROR:{buttonLabel:r.buttonLabel||"Tentar novamente",description:r.description,descriptionStyle:"text-left mb-lg font-md-regular text-color-on-surface-2",handleClick:()=>{a(!1)},icon:"icon icon-error-outline text-danger-default mr-xsm font-xlg-regular",title:r.title},SUCCESS:{buttonLabel:r.buttonLabel||"OK",description:r.description,descriptionStyle:"text-center mb-lg font-sm-regular text-on-surface-3",handleClick:()=>(l("review:finishreview:success:backtohome"),t()),icon:"icon icon-check-circle text-success-darker font-4xlg-regular",title:r.title}}[r.status];return i.createElement("div",{className:"bottom-sheet "+(e?"visible":"")},i.createElement("div",{className:"bottom-sheet-overlay"}),i.createElement("div",{className:"bottom-sheet-container md:!left-1/2 md:!top-1/2 md:!h-fit md:!max-h-[40%] md:w-fit md:!max-w-[380px] md:!-translate-x-1/2 md:!-translate-y-1/2 md:!transform md:rounded-b-2xlg"},"ERROR"===r.status?i.createElement("header",{className:"bottom-sheet-header !border-none"},i.createElement("div",{className:"flex flex-row items-center justify-center"},i.createElement("span",{className:`${o.icon} font-xlg-regular`}),i.createElement("p",{className:"text-on-surface-3 font-lg-bold"},o.title)),i.createElement("i",{className:"bottom-sheet-close","data-testid":"sheet-close",onClick:o.handleClick})):i.createElement("div",{className:"mt-lg flex flex-col items-center justify-center"},i.createElement("span",{className:o.icon}),i.createElement("p",{className:"mt-sm text-on-surface-3 font-md-bold"},o.title)),i.createElement("div",{className:"flex flex-col items-center justify-center p-md"},i.createElement("p",{className:o.descriptionStyle},o.description),i.createElement(n.A,{className:"mb-lg w-[100%]","data-testid":"button-review-modal",onClick:o.handleClick,size:"large",type:"button"},o.buttonLabel))))},y=({comment:e,data:t,dimensionsRating:a,errors:s,isSubmitDisabled:d,modalType:u,onCommentChange:c,onMediaChange:g,onModalClose:p,onRatingChange:f,onSubmit:y,onTagToggle:x,open:A,rating:S,refs:N,selectedMedia:w,selectedTags:T})=>{var I,O;return i.createElement("div",{className:"flex justify-center"},i.createElement("form",{className:"flex w-[90%] max-w-[600px] flex-col justify-center",onSubmit:y},i.createElement("h1",{className:"my-md text-on-surface-2 font-sm-medium lg:hidden"},"O que voc\xea achou desse produto?"),i.createElement("h1",{className:"my-md hidden text-on-surface-2 font-title-large-highlight lg:block"},"Avaliar produto"),i.createElement(l.A,{image:null==(I=t.item)?void 0:I.image,productLabel:null==(O=t.item)?void 0:O.title}),i.createElement(h,{name:"rating",onChange:f,ref:N.rating,score:S,variant:"large"}),(0,b.E4)(a,S,o.OD,o.Ib).length>0&&i.createElement("div",{className:"flex flex-col border-t-thin border-on-surface-8"},i.createElement("div",{className:"flex flex-col items-center justify-center"},i.createElement("p",{className:"mb-md mt-lg text-on-surface-2 font-xsm-medium"},"Como voc\xea descreveria o produto?"),i.createElement("div",{className:"mb-md flex flex-wrap items-center justify-center"},(0,b.E4)(a,S,o.OD,o.Ib).map(e=>i.createElement(r.A,{className:"m-xsm","data-testid":"reviewTag",endIcon:!0===(0,b.g)(e.id,T)?"icon icon-close":"",key:e.id,onClick:()=>x(e),selected:(0,b.g)(e.id,T),variant:"primary"},e.label))))),i.createElement(m,{selectedMedia:w,setSelectedMedia:g}),i.createElement("div",{className:"mb-lg"},i.createElement(v,{error:s.comment,maxLength:o.wT,onChange:c,rating:S,ref:N.comment,value:e})),i.createElement(n.A,{className:"mb-lg","data-testid":"button-submit",disabled:d,full:!0,size:"large",type:"submit"},"Enviar Avalia\xe7\xe3o"),u&&A&&i.createElement(E,{open:A,routeFunction:t.routeFunction,setOpen:p,variant:u})))}},66576:(e,t,a)=>{a.d(t,{A:()=>d});var i=a(53239),r=a(29504),l=a(16671),n=a(69279);let s={intent:l.Yt.info,message:""},o={[l.Yt.error]:{background:"bg-danger-lighter",icon:"error-outline",textColor:"text-on-surface-10"},[l.Yt.info]:{background:"bg-brand-default",icon:"check-circle",textColor:"text-on-surface-10"},[l.Yt.success]:{background:"bg-success-lighter",icon:"check-circle",textColor:"text-on-surface-10"},[l.Yt.warning]:{background:"bg-warning-lighter",icon:"warning-amber",textColor:"text-on-surface-1"}},d=i.memo(({alertContent:e=s,children:t,isRow:a=!1,title:l,withBorder:d=!1})=>{if(!l&&!t)return null;let{intent:u,message:c}=e,m=!!c&&!!u,g=u?o[u]:null,p=(0,n.y)("flex","flex-col","rounded-lg","gap-[24px]","bg-surface-container-lowest",d&&"border-thin border-solid border-on-surface-7"),v=(0,n.y)("p-[24px]","flex","flex-col","gap-[24px]",m&&"pt-[0]"),f=(0,n.y)("flex",a?"flex-row":"flex-col","gap-[24px]");return i.createElement("div",{className:p,"data-testid":"card"},m&&g&&i.createElement("div",{className:"rounded-t-lg leading-[18px]","data-testid":"alert-content"},i.createElement(r.A,{className:(0,n.y)("leading-[18px] font-2xsm-regular",g.background,g.textColor),customIcon:g.icon,customIconClassName:(0,n.y)("font-sm-regular",g.textColor),intent:u,message:c})),i.createElement("div",{className:v},l&&i.createElement("h3",{className:"font-xsm-bold text-neutral-700","data-testid":"card-title"},l),t&&i.createElement("div",{className:f,"data-testid":"card-content"},t)))})},69609:(e,t,a)=>{a.d(t,{k:()=>s});var i=a(80594),r=a(48189),l=a(58194);let n=!1,s=()=>{let e,t=r.c0.getState().data.userLocation,a=r.c0.getState().setNestedValue;return r.c0.subscribe(e=>e.data.userLocation,e=>{t=e}),{getUserLocation:r=>(0,i.sH)(void 0,[r],void 0,function*({fallback:i,update:r}){var s;if(!l.ZB.didFoundSDK())return null==i?void 0:i();if(!1===r&&(s=null==t?void 0:t.expiresIn)&&!((new Date).getTime()>s))return null==i||i(),{data:t||{}};if(n){let a=(new Date).getTime();return new Promise(i=>{e=setInterval(()=>{n||(clearInterval(e),i({data:t||{}})),(new Date).getTime()-a>=2e3&&(clearInterval(e),i({data:t||{}}))},10)})}try{n=!0;let e=yield(0,l.i_)(r);return e.zipcode&&(a("data.userLocation",e),a("data.userLocation.expiresIn",(new Date).getTime()+3e4)),{data:e}}catch(e){return{data:{},error:{message:"error while getting SDK location"}}}finally{n=!1}}),location:t}}},71607:(e,t,a)=>{a.d(t,{A:()=>S});var i=a(80594),r=a(53239),l=a(29504),n=a(24823);let s={default:"text-on-brand-default-inverted font-2xsm-bold"},o={full:{name:"full",positionClasses:"top-[3px]",replaceText:!1},international:{colorClasses:"text-on-danger-lighter-inverted",name:"aliexpress",positionClasses:"top-[3px]",replaceText:!0},magalu:{name:"magalu",replaceText:!1},magazineluiza:{name:"magalu",replaceText:!1},"mercado-full":{name:"mercado-full",positionClasses:"top-[3px]",replaceText:!1}},d=["aliexpress"],u=["magalu","magazineluiza"],c=["slug","target","shortPolicy","targetRemaining","disclaimer"],m=e=>t=>e.some(e=>e.toLowerCase().includes(null==t?void 0:t.toLowerCase()));var g=a(30576),p=a(22350),v=a(16671),f=a(95381),h=a(51520),b=a(3113),E=a(69279);let y=(0,r.forwardRef)(({bottomSheet:e,className:t,handleSelectClosenessEvent:a,onBottomSheetClose:i,onBottomSheetOpen:l,progress:n,text:s},o)=>{let[d,u]=(0,r.useState)(!!(null==e?void 0:e.show));return(0,r.useEffect)(()=>{u(!!(null==e?void 0:e.show))},[null==e?void 0:e.show]),r.createElement(r.Fragment,null,r.createElement("div",{className:(0,E.y)("flex cursor-pointer items-center justify-between gap-sm rounded-md bg-green-100 p-sm",t),onClick:()=>{null==a||a(),null==l||l(),u(!0)},ref:o},r.createElement("div",{className:"w-full space-y-2xsm text-on-surface-2 font-2xsm-regular [&>p>strong]:font-2xsm-medium","data-testid":"closeness-content"},"string"==typeof s?r.createElement("p",null,s):s,n>0&&r.createElement(b.A,{size:"xsmall",value:n,variation:"perfect-darker"})),r.createElement("i",{className:"icon icon-chevron-right text-on-brand-default-inverted font-lg-bold"})),e&&r.createElement(h.A,{contentStyle:"flex items-center gap-md text-on-surface-3",onClose:()=>{null==i||i(),u(!1)},title:"Como funciona o Frete Gr\xe1tis?",titleStyle:"font-md-bold text-on-surface-3",visible:d},r.createElement("i",{className:(0,E.y)("icon text-success-default font-xlg-regular",e.icon),"data-testid":"closeness-bottom-sheet-icon"}),r.createElement("div",{className:"flex flex-col gap-2xsm"},r.createElement("span",{className:"font-xsm-bold","data-testid":"closeness-bottom-sheet-title"},e.title),r.createElement("p",{className:"font-2xsm-regular","data-testid":"closeness-bottom-sheet-text"},e.text))))});var x=a(40262),A=a(34047);let S=e=>{var{actionLabel:t,changeLabel:a,className:h="px-md",deliveryAlertMessage:b,getShippingData:E,itemData:S,locationData:N,mappedErrors:w={},maxCityLength:T,onShippingChange:I,onShippingClick:O,onShippingError:C,onShippingListView:R,onShippingOpen:D,organizationId:P,placeholder:k,queryParams:j,salesChannelId:_="",showCloseness:L=!1,toggleAutoShipping:M="AUTO"}=e,$=(0,i.Tt)(e,["actionLabel","changeLabel","className","deliveryAlertMessage","getShippingData","itemData","locationData","mappedErrors","maxCityLength","onShippingChange","onShippingClick","onShippingError","onShippingListView","onShippingOpen","organizationId","placeholder","queryParams","salesChannelId","showCloseness","toggleAutoShipping"]);let{closenessInfo:H,getClosenessInfo:U}=(()=>{let[e,t]=(0,r.useState)({});return{closenessInfo:e,getClosenessInfo:e=>{if(!e||!e.length)return{};let a=(e=>{if(!e)return"none";let{name:t,slug:a}=e||{};if(!(e=>c.every(t=>null!=(null==e?void 0:e[t])))(e))return"none";let i=m(d),r=m(u);switch(a){case"fulfillment":return"full";case"mercado-full":return"mercado-full";case"seller":if(i(t))return"international";if(r(t))return"magalu";if(t)return"seller"}return"none"})(e[0]),{disclaimer:i,name:r,shortPolicy:l,slug:n,target:g,targetRemaining:p}=e[0]||{},v=(({target:e,targetRemaining:t})=>e&&t&&0!==t?Math.min(100,Math.round((e-t)/e*100)):0)({target:g,targetRemaining:p}),f=(({closenessType:e,disclaimer:t,slug:a})=>{if(!t||"string"!=typeof t)return"";let i=(new DOMParser).parseFromString(t,"text/html"),r=i.querySelector(".agrupamento");if(!r)return t;let l=a||"default",n=(e=>{var t;return null!=(t=s[e])?t:s.default})(l),d=o[e];if(r.classList.add(l,...n.split(" ")),d){let e=`<i class="${["relative","icon",`icon-${d.name}`,...d.positionClasses?d.positionClasses.split(" "):[],...d.colorClasses?d.colorClasses.split(" "):[]].join(" ")}"></i>`;d.replaceText?r.innerHTML=e:r.innerHTML=`${e} ${r.innerHTML}`.trim()}return i.body.innerHTML})({closenessType:a,disclaimer:i,slug:n}),h=`${(e=>{if(!e)return"";let t=(new DOMParser).parseFromString(e,"text/html").querySelector(".agrupamento");return t?t.outerHTML:""})(f)}`;t(()=>({closenessBottomSheetTitle:h,closenessDescription:l||"",closenessDisclaimer:f,closenessName:r,closenessProgress:v,closenessType:a}))}}})(),{closenessBottomSheetTitle:F,closenessDescription:X,closenessDisclaimer:V,closenessProgress:B,closenessType:z}=H,{offers:G=[]}=S||{},q=(null==G?void 0:G[0])||{},[W,Y]=(0,r.useState)([]),[K,Q]=(0,r.useState)(null),{parseShippingVariables:J}=(0,p.A)(),Z=(0,r.useRef)(!1),{closeDialogHash:ee,isVisible:et,pushDialogHash:ea}=(0,g.A)("shippingCloseness"),ei=e=>{"MANUAL"!==M&&(null==N?void 0:N.zipCode)&&(null==S?void 0:S.id)&&er(e)},er=(0,r.useCallback)(e=>(0,i.sH)(void 0,void 0,void 0,function*(){var t,a,i,r,l,n,s,o;Q(null);let{data:{closenessGroups:d,deliveries:u,shippings:c,status:m},deliveriesId:g,error:p,errorCode:v,errors:f}=yield E(J({config:{organizationId:P,salesChannelId:_},cookies:{location:N},item:S,route:j})),h="OK"!==m||(null!=(t=null==f?void 0:f.length)?t:0)>0||p;if(!h&&e&&e(u),I&&g&&I({closenessGroups:d,deliveries:u,deliveriesId:g,error:p,errorCode:v,errors:f,isClickedCalculateShipping:"function"==typeof e,shippings:c,status:m,zipcode:(null==N?void 0:N.zipCode)||""}),h){let e=null!=(l=null!=(r=null!=(i=null==(a=null==f?void 0:f[0])?void 0:a.message)?i:w[p])?r:p)?l:"Erro ao calcular frete";return Q(e),C&&C(e,g,null==N?void 0:N.zipCode,v),null}U(d);let b=(null==(o=null==(s=null==(n=null==c?void 0:c[0])?void 0:n.packages)?void 0:s[0])?void 0:o.deliveryTypes)||[];return Y(b),b}),[null==N?void 0:N.zipCode,null==S?void 0:S.id]);(0,r.useEffect)(()=>{Z.current&&(ei(),Y([]),U([]),Q(null))},[null==S?void 0:S.id]),(0,r.useEffect)(()=>(ei(Z.current?O:void 0),Z.current=!0,()=>{Y([]),U([]),Q(null)}),[null==N?void 0:N.zipCode]);let el=W.map(e=>null==e?void 0:e.time).filter(e=>"number"==typeof e).toString(),en=!!W.length||K;return r.createElement("div",Object.assign({className:h,"data-testid":"product-shipping"},$),r.createElement(x.A,{actionLabel:t,changeLabel:a,done:!!(null==W?void 0:W.length)||!!K,loading:!1,location:(null==N?void 0:N.zipCode)?{zipCode:N.zipCode,zipCodeCity:N.city,zipCodeState:N.state}:void 0,maxCityLength:T,onClick:()=>{(null==N?void 0:N.zipCode)&&W.length||!(null==N?void 0:N.zipCode)||K?D&&D():er(O)},placeholder:k}),!!b&&r.createElement(l.A,{customIcon:"package-alert",intent:v.Yt.success,message:b}),L&&z&&"none"!==z&&r.createElement(y,{bottomSheet:{show:et,text:r.createElement("span",{dangerouslySetInnerHTML:{__html:X}}),title:r.createElement("span",{dangerouslySetInnerHTML:{__html:F}})},onBottomSheetClose:ee,onBottomSheetOpen:ea,progress:B,text:r.createElement("span",{dangerouslySetInnerHTML:{__html:V}})}),en&&r.createElement(n.A,{onChange:({isVisible:e})=>{e&&(null==R||R({deliveryTypes:W,errorMessage:K}))}},r.createElement(A.A,{"data-times":el,isInternationalShipping:(0,f.A)(q),items:W}),K&&r.createElement(A.A.ErrorMessage,{message:K})))}},72536:(e,t,a)=>{a.d(t,{A:()=>p});var i=a(53239),r=a(87157),l=a(30048),n=a(69279),s=a(91633),o=a(16153);let d=({discountLabel:e,payment:t,showAll:a})=>{var r,l;let[d,u]=i.useState(a),{id:c}=t,m=null==(r=null==t?void 0:t.installmentPlans)?void 0:r.some(({interestAmount:e})=>!!Number(e)),g="luiza_ouro"===c;return i.createElement(i.Fragment,null,i.createElement("table",{className:"mb-sm w-full border-separate border-spacing-y-3xsm","data-testid":`payment-table-${t.label}`},i.createElement("thead",{className:"font-sm-regular"},i.createElement("tr",null,i.createElement("th",{className:"pb-sm pl-md text-left text-on-surface-2 font-xsm-bold"},"Parcelas"),i.createElement("th",{className:"pb-sm pr-md text-right text-on-surface-2 font-xsm-bold"},"Total"))),i.createElement("tbody",{className:(0,n.y)(!d&&"[&>*:nth-child(n+13)]:hidden","font-2xsm-regular","bg-on-surface-7")},null==(l=t.installmentPlans)?void 0:l.map(a=>{let r=Number(null==a?void 0:a.installment),l=!!Number(null==a?void 0:a.interestAmount);return i.createElement("tr",{className:(0,n.y)("first:[&:first-child>td]:rounded-ss-lg","first:[&:last-child>td]:rounded-es-lg","last:[&:first-child>td]:rounded-se-lg","last:[&:last-child>td]:rounded-ee-lg","bg-surface-container-lowest"),"data-testid":`payment-table-${t.label}-item`,key:`${t.id}-installment-${null==a?void 0:a.installment}`},i.createElement("td",{className:"px-xsm py-sm text-on-surface-3","data-testid":"payment-table-item-installment"},i.createElement("span",{className:"font-xsm-medium"},(0,o.yv)(String(null==a?void 0:a.installment)),i.createElement("span",null,(0,s.A)({value:null==a?void 0:a.installmentAmount}),l&&"*")),l&&g?null:i.createElement("p",{className:"mt-[4px] text-success-darker font-3xsm-regular"},!l&&"sem juros")),i.createElement("td",{className:"px-sm text-right","data-testid":"payment-table-item-total"},r>1&&i.createElement("span",{className:"text-on-surface-5 font-2xsm-bold"},(0,s.A)({value:a.totalAmount})),1===r&&!!Number((null==a?void 0:a.discount)||0)&&i.createElement("span",{className:"tag-sm tag-success-lighter font-3xsm-bold","data-testid":"discount-label"}," ",Number(null==a?void 0:a.discount),e)))}))),m&&i.createElement("p",{className:"mb-md italic text-on-surface-3 font-3xsm-regular","data-testid":"legal-text"},"*Juros: Todos os encargos da opera\xe7\xe3o, como juros, custo de parcelamento e outras tarifas est\xe3o inclu\xeddas neste valor."),(t.installmentPlans||[]).length>12&&!d&&i.createElement("button",{className:"btn-lg my-sm px-2xlg","data-testid":`payment-table-${t.label}-show-more`,onClick:()=>u(!0)},"VEJA MAIS"))},u=({discountLabel:e,payment:t})=>i.createElement(i.Fragment,null,i.createElement("p",{className:"mb-[0px] mt-sm font-xsm-bold","data-testid":`without-interest-${t.label}`},(0,s.A)({value:t.amount})," ",!!Number(t.discount||0)&&i.createElement(i.Fragment,null,i.createElement("span",{className:"text-success-default font-2xsm-regular","data-testid":"payment-item-with-discount"},Number(t.discount)," ",e))),i.createElement("p",{className:"mt-[0px] font-xsm-regular"},t.description));var c=a(38157),m=a(95572);let g=({handleChange:e,payments:t,tabSelected:a})=>i.createElement(m.A,{className:"pt-md",onChange:e},t.map(e=>i.createElement(c.A,{"data-testid":"tab-header-item",key:e.id,selected:e.id===a,value:e.id},i.createElement("span",{"data-testid":`tab-header-item-${e.label}`},e.label)))),p=({defaultIdSelected:e,discountLabel:t="% OFF",onChange:a,onTabClick:n,payments:s=[]})=>{let[o,c]=i.useState(e);(0,i.useEffect)(()=>{m(e)},[e]);let m=e=>{c(e);let t=s.find(t=>t.id===e);null==a||a(t)};return i.createElement(r.Ay,{value:o},i.createElement(g,{handleChange:(e,t)=>{n&&n(s.find(e=>e.id===t)),m(t)},payments:s,tabSelected:o}),s.map(e=>i.createElement(l.A,{className:"px-md pt-xlg md:overflow-auto","data-testid":`tab-${e.label}`,key:e.id,value:e.id},e.hasInstallments?i.createElement(d,{discountLabel:t,payment:e}):i.createElement(u,{discountLabel:t,payment:e}))))}},72599:(e,t,a)=>{a.d(t,{h:()=>E,E:()=>y});var i,r=a(80594),l=a(25378),n=a(53239),s=a(33988),o=a.n(s),d=a(33580),u=a.n(d),c=a(2380),m=a.n(c),g=a(69732);!function(e){e.ADD_WISHLIST_ERROR="N\xe3o foi poss\xedvel adicionar aos Favoritos",e.DUPLICATE="Produto j\xe1 adicionado aos Favoritos",e.EMPTY_USER_ID_ERROR="Usu\xe1rio n\xe3o encontrado",e.REMOVE_WISHLIST_ERROR="N\xe3o foi poss\xedvel remover dos Favoritos",e.SOMETHING_WRONG="Algo deu errado"}(i||(i={}));var p=a(40404);let v=e=>t=>(a=null)=>{if(!t)return e(a)},f=e=>(t,a)=>(...i)=>(0,r.sH)(void 0,void 0,void 0,function*(){if(t){let{items:e=[]}=yield a.get();return{data:{wishlist:{items:e}},error:""}}return yield e(...i)});var h=a(68841);let b=(0,n.createContext)({}),E=({children:e,values:t})=>{var a;let[s,d]=(0,n.useState)({}),{isLogged:c=!1,storageOnly:E=!1,ttl:y={expireIn:3600},userId:x}=t,A=(!x||!c)&&null!=(a=null==t?void 0:t.useUnloggedWishlist)&&a,S=!x&&!A,N=(()=>{let{append:e,createStoreObj:t,exists:a,get:i,remove:r,set:l}=(0,h.A)("wishlist");return{append:e,createStoreObj:t,exists:a,get:i,remove:r,set:l}})(),{useWishlistCache:w}=(0,l.xo)(),T=w(),{addToWishlist:I,removeFromWishlist:O,updateWishlist:C}=(({setWishlist:e,storage:t,storageOnly:a,ttl:l,userId:n,useUnloggedWishlist:s})=>d=>{let{addWishlist:c,getWishlist:h,removeWishlist:b}=(()=>{let e=(0,g.tH)();return{addWishlist:t=>(0,r.sH)(void 0,[t],void 0,function*({name:t,price:a,userId:r,variationId:l}){try{let{data:{addToWishlist:n}}=yield e.mutate({mutation:o(),variables:{name:t,price:a,userId:r,variationId:l}});if(null===n)throw Error(i.ADD_WISHLIST_ERROR);let{status:s}=n;if("OK"!==s)throw Error(i[s]);return{data:{status:s},error:null}}catch(e){return{data:null,error:null==e?void 0:e.message}}}),getWishlist:t=>(0,r.sH)(void 0,[t],void 0,function*({userId:t}){try{if(!t)throw Error(i.EMPTY_USER_ID_ERROR);let{data:a={}}=yield e.query({query:m(),variables:{userId:t}}),{wishlist:r={}}=a;return{data:{wishlist:r},error:null}}catch(e){return{data:null,error:null==e?void 0:e.message}}}),removeWishlist:t=>(0,r.sH)(void 0,[t],void 0,function*({userId:t,variationId:a}){try{let{data:{removeFromWishlist:r}}=yield e.mutate({mutation:u(),variables:{userId:t,variationId:a}});if(null===r)throw Error(i.REMOVE_WISHLIST_ERROR);let{status:l}=r;if("OK"!==l)throw Error(i[l]);return{data:{status:l},error:null}}catch(e){return{data:null,error:null==e?void 0:e.message}}})}})(),E=i=>(0,r.sH)(void 0,void 0,void 0,function*(){let r=null;return a||(r=yield f(c)(s,t)(Object.assign(Object.assign({},i),{userId:n})).then(e=>e.error)),r||(yield t.append({id:i.variationId,name:i.name,price:i.price},l),e((yield t.get()))),Object.assign(Object.assign({},i),{error:r})}),y=i=>(0,r.sH)(void 0,void 0,void 0,function*(){let r=null;return a||(r=yield f(b)(s,t)(Object.assign(Object.assign({},i),{userId:n})).then(e=>e.error)),r||(yield t.remove(i.variationId,l),e((yield t.get()))),Object.assign(Object.assign({},i),{error:r})});return{addToWishlist:v(E)(d),removeFromWishlist:v(y)(d),updateWishlist:v(()=>(0,r.sH)(void 0,void 0,void 0,function*(){let a=yield t.get();if(t.autoSync()&&(0,p.b)(l,a)){let{data:a,error:i}=yield f(h)(s,t)({userId:n});!i&&a&&e((yield(0,r.sH)(void 0,void 0,void 0,function*(){var e;let i=(yield t.get()).items,r=null==(e=null==a?void 0:a.wishlist)?void 0:e.items;return((e,t)=>{let{add:a,remove:i}=((e=[],t=[])=>({add:t.reduce((t,a)=>((null==e?void 0:e.length)&&!e.find(({id:e})=>a.id===e)&&(t=[...t,Object.assign(Object.assign({},a),{variationId:a.id})]),t),[]),remove:e.reduce((e,a)=>((null==t?void 0:t.length)&&!t.find(({id:e})=>a.id===e)&&(e=[...e,{variationId:null==a?void 0:a.id}]),e),[])}))(e,t);a.forEach(e=>{E(e)}),i.forEach(e=>{y(e)})})(r,i),t.set(((e=[],t=[])=>[...e,...t].reduce((e,t)=>(e.find(({id:e})=>t.id===e)||(e=[...e,t]),e),[]))(r,i),l),yield t.get()})))}else e(a)}))(d)}})({setWishlist:d,storage:{append(e,t){return(0,r.sH)(this,void 0,void 0,function*(){yield T.append({fallback:()=>{N.append(e,t)},id:null==e?void 0:e.id,price:null==e?void 0:e.price,title:null==e?void 0:e.name})})},autoSync:()=>T.autoSync({fallback:()=>!0}),createStoreObj(e,t){N.createStoreObj(e,t)},exists:()=>T.exists({fallback:()=>N.exists()}),get(){return(0,r.sH)(this,void 0,void 0,function*(){let{data:e}=yield T.get({fallback:()=>({data:N.get()})});return{expireIn:(null==e?void 0:e.expireIn)||0,items:null==e?void 0:e.items}})},remove(e,t){return(0,r.sH)(this,void 0,void 0,function*(){yield T.remove({fallback:()=>{N.remove(e,t)},id:e})})},set(e,t){N.set(e,t)}},storageOnly:E,ttl:y,userId:x,useUnloggedWishlist:A})(S);return(0,n.useEffect)(()=>{C()},[x]),n.createElement(b.Provider,{value:{addToWishlist:I,isOnWishlist:e=>{var t;return!!(null==(t=s.items)?void 0:t.find(t=>t.id===e))},removeFromWishlist:O,updateWishlist:C,wishlist:s}},e)},y=()=>(0,n.useContext)(b)},77868:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(80594),r=a(53239),l=a(7380);let n=e=>{var{allowedTags:t=[],className:a,deniedTags:n=[],richContent:s}=e,o=(0,i.Tt)(e,["allowedTags","className","deniedTags","richContent"]);return s?r.createElement("div",Object.assign({className:a,dangerouslySetInnerHTML:{__html:(0,l.A)(s,{allowedTags:t,deniedTags:n})},"data-testid":"rich-content-container"},o)):null}},78095:(e,t,a)=>{a.d(t,{UP:()=>r,Uu:()=>n,f3:()=>s,hb:()=>l,ic:()=>i});let i=5,r=e=>e.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.type]:t.mandatory?"":t.current}),{}),l=e=>e.map(e=>e.type),n=e=>e.reduce((e,t)=>t.mandatory?[...e,t.type]:e,[]),s=(e,t)=>e.reduce((e,a)=>Object.assign(Object.assign({},e),{[a.type]:a.mandatory?t[a.type]===a.current&&a.current||"":a.current}),{})},78342:(e,t,a)=>{a.d(t,{A:()=>n});var i=a(53239),r=a(91094),l=a(88034);let n=({item:e,options:t={}})=>{var a;let{brand:n,bundles:s,description:o,factsheet:d,title:u=""}=e||{},c=a=>{var i;let n={},c=null==(i=s||[])?void 0:i.find(({id:e})=>`${e}`==`${a}`);n.title=(null==c?void 0:c.title)||u;let m=null==c?void 0:c.factsheet,g=m&&(0,l.a)(m,"apresentacao")||o;return n.description=(null==t?void 0:t.getRawDescription)?g:(0,r.A)(g),n.factsheet=m||d,Object.assign(Object.assign(Object.assign({},e),n),{bundleId:a||""})},[m,g]=(0,i.useState)(c(null==(a=null==s?void 0:s[0])?void 0:a.id)),p=e=>{g(c(e))};return(0,i.useEffect)(()=>{var e;p(null==(e=null==s?void 0:s[0])?void 0:e.id)},[null==e?void 0:e.id]),Object.assign(Object.assign(Object.assign({brand:n},e),m),{getBundleProduct:e=>p(e)})}},80499:(e,t,a)=>{a.d(t,{A:()=>m});var i=a(53239),r=a(1304),l=a(89508),n=a(16671),s=a(69279),o=a(17402),d=a(80004),u={thumbnailContainer:({className:e})=>(0,s.y)("overflow-hidden overflow-x-auto","md:[-ms-overflow-style:none]","md:[scrollbar-width:none]","md:[&::-webkit-scrollbar]:hidden",e),thumbnailItem:({isLimitItem:e,itemHeight:t,itemWidth:a,selected:i})=>(0,s.y)("relative","flex items-center justify-center overflow-hidden cursor-pointer","bg-surface-container-lowest","rounded-md ring-1 hover:ring-2 hover:ring-interaction-default",i?"ring-2 ring-interaction-default":"ring-on-surface-7",a||"w-[88px]",t||"h-[88px]",e&&"before:block before:absolute before:w-full before:h-full before:bg-on-surface-3 before:opacity-70")};let c=({alt:e,assets:t,className:a="",height:r,itemHeight:l,itemWidth:n,limit:o=0,onItemClick:c,onLimitClick:m,selectedIndex:g,width:p})=>{let v=(0,i.useRef)(null),f=(0,i.useRef)(!1),h=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{var e;null==(e=v.current)||e.scrollIntoView({behavior:f.current?"smooth":"instant",block:"nearest",inline:"center"})},[g]);let b=o>0?t.slice(0,o):t,E=t.length-b.length;return i.createElement("div",{className:u.thumbnailContainer({className:a}),ref:h},i.createElement("div",{className:(0,s.y)("grid grid-flow-col gap-xsm overflow-hidden overflow-x-auto p-md md:auto-cols-min md:gap-sm",b.length>=5&&"flex justify-between")},b.map(({src:t},a)=>{let s=!!E&&a===o-1,h=g===a;return i.createElement("div",{className:u.thumbnailItem({isLimitItem:s,itemHeight:l,itemWidth:n,selected:h}),"data-selected":h,"data-testid":"thumbnail-item",key:`${t}-${a}`,onClick:e=>((e,t,a,i)=>{if(t.preventDefault(),f.current=!0,i&&m)return m(a);null==c||c(e)})(a,e,t,s),ref:h?v:void 0},s&&i.createElement("span",{className:"absolute m-auto block cursor-pointer text-surface-high font-xlg-regular","data-testid":"thumbnail-limit-item"},"+",E+1),i.createElement(d.A,{alt:`${e||""} thumbnails-${a}`,className:"h-auto w-full bg-contain",height:r,key:`${t}-${a}`,src:t,width:p}))})))},m=({className:e="",imageProps:t,mediaAssets:a,onImageChange:u,onImageClick:m,onMediaClick:g})=>{let p=a.find(e=>"audio"===e.type),v=a.find(e=>"video"===e.type),f=a.filter(e=>"image"===e.type).map(e=>e.src),h=(0,l.A)(n.vA),[b,E]=(0,i.useState)(0),y=(0,i.useRef)(null),x=e=>m(e),A=(e,t)=>g(e,t);return i.createElement(i.Fragment,null,i.createElement("div",{className:(0,s.y)("relative",e)},i.createElement(o.A,{contentWrapper:!1,currentIndex:b,insideControls:!1,loopOn:!0,onChange:e=>{u(),E(e)},ref:y,showArrowControls:!1,showControls:!0,transitionDurationSec:300},f.map((e,a)=>i.createElement("button",{"aria-label":`Ver imagem ${a+1} de ${f.length}`,className:"aspect-square max-h-[344px] w-screen","data-testid":"carousel-item",key:e,onClick:()=>x(e)},i.createElement(d.A,{alt:t.alt,className:"max-h-[344px] w-screen object-contain",decoding:a?"auto":"sync",fetchPriority:a?"low":"high",height:void 0!==t.height?String(t.height):void 0,loading:a?"lazy":"eager",src:e,title:t.title,width:void 0!==t.width?String(t.width):void 0})))),(v||p)&&i.createElement("div",{className:"absolute bottom-md left-md flex gap-xsm","data-testid":"media-gallery-icons"},v&&i.createElement(r.A,{"aria-label":"ver video sobre o produto",className:"border-none bg-surface-container-lower ring-interaction-default hover:bg-surface-container-lower","data-testid":"media-gallery-video-icon",onClick:()=>A("video",v.src),size:"medium"},i.createElement("i",{className:"icon icon-play-arrow text-interaction-default font-xlg-bold"})),p&&i.createElement(r.A,{"aria-label":"ouvir audio sobre o produto",className:"border-none bg-surface-container-lower ring-interaction-default hover:bg-surface-container-lower","data-testid":"media-gallery-audio-icon",onClick:()=>A("audio",p.src),size:"medium"},i.createElement("i",{className:"icon icon-audio-up text-interaction-default font-xlg-bold"})))),!h&&i.createElement("div",{className:"h-full md:overflow-x-auto md:[-ms-overflow-style:none] md:[scrollbar-width:none] md:[&::-webkit-scrollbar]:hidden"},i.createElement(c,{assets:a.filter(e=>"image"===e.type),height:void 0!==t.height?String(t.height):void 0,itemHeight:"h-[62px]",itemWidth:"w-[62px]",limit:5,onItemClick:e=>{var t,a;null==(a=null==(t=y.current)?void 0:t.setActive)||a.call(t,e),E(e)},onLimitClick:x,selectedIndex:b,width:void 0!==t.width?String(t.width):void 0})))}},80512:(e,t,a)=>{a.d(t,{A:()=>s});var i=a(80594),r=a(53239),l=a(80004),n=a(69279);let s=e=>{var{as:t="div",borderWidth:a="medium",className:s,imageSize:o={height:48,width:48},item:d,showProductReference:u,variation:c="primary"}=e,m=(0,i.Tt)(e,["as","borderWidth","className","imageSize","item","showProductReference","variation"]);let{height:g,width:p}=o,v=`${d.title}${u&&d.reference?` - ${d.reference}`:""}`;return r.createElement(t,Object.assign({className:(0,n.y)("flex items-center rounded-lg p-xsm",{outline:"border-on-surface-8",primary:"border-interaction-default"}[c],{medium:"border-medium",thin:"border-thin"}[a],s),"data-testid":"product-overview"},m),r.createElement(l.A,{alt:v,className:"mr-md object-cover","data-testid":"product-overview-image",height:null==g?void 0:g.toString(),loading:"lazy",src:d.image,title:v,width:null==p?void 0:p.toString()}),r.createElement("span",{className:"text-left text-on-surface-2 font-xsm-regular","data-testid":"product-overview-title"},v))}},83820:(e,t,a)=>{a.d(t,{A:()=>E});var i,r=a(80594),l=a(92288),n=a(20766),s=a(53239),o=a(1621);function d(e){let t=(0,s.useRef)(e);return(0,s.useLayoutEffect)(()=>{t.current=e},[e]),(0,s.useCallback)((...e)=>t.current(...e),[])}var u=a(86827),c=a(96862);!function(e){e[e.CHANGE_BRAND=0]="CHANGE_BRAND",e[e.CHANGE_MODEL=1]="CHANGE_MODEL",e[e.CHANGE_VERSION=2]="CHANGE_VERSION",e[e.CHANGE_YEAR=3]="CHANGE_YEAR",e[e.FETCH_START=4]="FETCH_START",e[e.RELOAD_PAGE_START=5]="RELOAD_PAGE_START",e[e.RESET_ALL=6]="RESET_ALL",e[e.SAVE_SEARCH_URL=7]="SAVE_SEARCH_URL",e[e.SET_CAR_PLATE=8]="SET_CAR_PLATE",e[e.SET_COMPATIBILITY=9]="SET_COMPATIBILITY",e[e.SET_DATA=10]="SET_DATA",e[e.SET_ERROR=11]="SET_ERROR",e[e.SET_LOADING=12]="SET_LOADING",e[e.SET_PLATE_ERROR=13]="SET_PLATE_ERROR",e[e.SET_QUERY_PARAMS_MODE=14]="SET_QUERY_PARAMS_MODE",e[e.SET_SHOW_SUMMARY=15]="SET_SHOW_SUMMARY",e[e.SET_VEHICLE_DATA=16]="SET_VEHICLE_DATA",e[e.SET_VEHICLE_DETAILS=17]="SET_VEHICLE_DETAILS"}(i||(i={}));let m=()=>{let e=(0,c.ne)();return{compatibility:void 0,data:u.AM,error:void 0,loading:!1,pendingFetch:!1,pendingNavigatePage:!1,plateError:void 0,selected:Object.assign(Object.assign({},u.VL),null==e?void 0:e.selected),uiState:(null==e?void 0:e.uiState)||u.A1.uiState}};var g=a(37226),p=a(69732);let v={DEFAULT_VEHICLE_FIELDS:["brand","model","version","year"],TIMEOUT_MS:4e3},f=(e={},t=[])=>[...v.DEFAULT_VEHICLE_FIELDS,...t].reduce((t,a)=>{var i;return null==(i=e[a])||""===i?t:Object.assign(Object.assign({},t),{[a]:e[a]})},{}),h=e=>{if("number"==typeof e)return e;if("string"==typeof e){let t=parseInt(e,10);return isNaN(t)?void 0:t}},b=(e,t)=>(0,r.sH)(void 0,void 0,void 0,function*(){e({type:i.FETCH_START}),e({payload:null,type:i.SET_ERROR});try{return yield t()}catch(t){return e({payload:t.message||"Unknown error occurred",type:i.SET_ERROR}),null}}),E=e=>{var t,a,E;let{client:y}=(0,l.A)(),x=(0,n.rd)(),{cardanReducer:A,createInitialState:S}={cardanReducer:(e,t)=>{if(!(null==t?void 0:t.type)&&!(null==t?void 0:t.payload))return e;switch(t.type){case i.CHANGE_BRAND:return((e,t)=>{var a,i;if(null==t?void 0:t.payload)return Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},null==e?void 0:e.data),{models:[],versions:[],years:[]}),pendingFetch:!0,selected:Object.assign(Object.assign({},null==e?void 0:e.selected),{brand:null==(a=null==t?void 0:t.payload)?void 0:a.id,brandLogo:(null==(i=null==t?void 0:t.payload)?void 0:i.urlLogo)||null,model:null,version:null,year:null})})})(e,t);case i.CHANGE_MODEL:return((e,t)=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},null==e?void 0:e.data),{versions:[],years:[]}),pendingFetch:!0,selected:Object.assign(Object.assign({},null==e?void 0:e.selected),{model:null==t?void 0:t.payload,version:null,year:null})}))(e,t);case i.CHANGE_VERSION:return((e,t)=>Object.assign(Object.assign({},e),{selected:Object.assign(Object.assign({},null==e?void 0:e.selected),{version:null==t?void 0:t.payload})}))(e,t);case i.CHANGE_YEAR:return((e,t)=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},null==e?void 0:e.data),{versions:[]}),pendingFetch:!0,selected:Object.assign(Object.assign({},null==e?void 0:e.selected),{version:null,year:null==t?void 0:t.payload})}))(e,t);case i.FETCH_START:return Object.assign(Object.assign({},e),{pendingFetch:!1});case i.RELOAD_PAGE_START:return Object.assign(Object.assign({},e),{pendingNavigatePage:!1});case i.RESET_ALL:return(e=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},null==e?void 0:e.data),{models:[],versions:[],years:[]}),pendingFetch:!0,pendingNavigatePage:!0,selected:u.VL,uiState:{isQueryParamsMode:!1,showSummary:!1}}))(e);case i.SAVE_SEARCH_URL:return((e,t)=>Object.assign(Object.assign({},e),{pendingFetch:!1,pendingNavigatePage:!0,selected:Object.assign(Object.assign({},null==e?void 0:e.selected),{searchUrl:null==t?void 0:t.payload})}))(e,t);case i.SET_CAR_PLATE:return((e,t)=>Object.assign(Object.assign({},e),{selected:Object.assign(Object.assign({},null==e?void 0:e.selected),{carPlate:null==t?void 0:t.payload})}))(e,t);case i.SET_COMPATIBILITY:return((e,t)=>Object.assign(Object.assign({},e),{compatibility:null==t?void 0:t.payload,pendingFetch:!1}))(e,t);case i.SET_DATA:return Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},null==e?void 0:e.data),{[t.entity]:null==t?void 0:t.payload}),pendingFetch:!1});case i.SET_ERROR:return Object.assign(Object.assign({},e),{error:null==t?void 0:t.payload,pendingFetch:!1});case i.SET_LOADING:return Object.assign(Object.assign({},e),{loading:null==t?void 0:t.payload});case i.SET_PLATE_ERROR:return Object.assign(Object.assign({},e),{plateError:null==t?void 0:t.payload});case i.SET_QUERY_PARAMS_MODE:return((e,t)=>Object.assign(Object.assign({},e),{selected:Object.assign(Object.assign({},null==e?void 0:e.selected),null==t?void 0:t.payload),uiState:{isQueryParamsMode:!0,showSummary:!0}}))(e,t);case i.SET_SHOW_SUMMARY:return((e,t)=>Object.assign(Object.assign({},e),{uiState:Object.assign(Object.assign({},null==e?void 0:e.uiState),{showSummary:null==t?void 0:t.payload})}))(e,t);case i.SET_VEHICLE_DATA:return Object.assign(Object.assign({},e),{pendingFetch:!1,selected:Object.assign(Object.assign({},null==e?void 0:e.selected),null==t?void 0:t.payload)});case i.SET_VEHICLE_DETAILS:return((e,t)=>Object.assign(Object.assign({},e),{selected:Object.assign(Object.assign({},null==e?void 0:e.selected),{vehicleDetails:null==t?void 0:t.payload})}))(e,t);default:return e}},createInitialState:m},[N,w]=(0,s.useReducer)(A,S()),{fetchCompatibilityDataService:T,fetchPlateDataService:I,fetchVehicleDataService:O}=((e,t)=>{let{fetchCompatibilityData:a,fetchPlateData:l,fetchVehicleData:n}=(()=>{let e=(0,p.tH)(),t=(0,s.useCallback)((t,a)=>(0,r.sH)(void 0,void 0,void 0,function*(){try{let i,l,n=yield(i=e.query({fetchPolicy:"network-only",query:t,variables:a}),l=v.TIMEOUT_MS,(0,r.sH)(void 0,void 0,void 0,function*(){let e;return Promise.race([i,new Promise((t,a)=>{e=setTimeout(()=>{a(Error(`Operation timed out after ${l}ms`))},l)})]).finally(()=>{clearTimeout(e)})}));return(null==n?void 0:n.data)||null}catch(e){return null}}),[e]),a=(0,s.useCallback)((...e)=>(0,r.sH)(void 0,[...e],void 0,function*(e={}){let{brand:a,model:i,year:r}=e,l=Object.assign(Object.assign({},f(e)),{includeModel:!!a,includeVersion:!!(a&&i&&r),includeYear:!(!a||!i),year:h(r)});return(yield t(g.VehicleCardanFilterQuery,l))||null}),[t]);return{fetchCompatibilityData:(0,s.useCallback)((...e)=>(0,r.sH)(void 0,[...e],void 0,function*(e={}){let a=Object.assign(Object.assign({},f(e,["partNumber"])),{year:h(null==e?void 0:e.year)});return t(g.VehiclePartCompatibilityQuery,a)}),[t]),fetchPlateData:(0,s.useCallback)((...e)=>(0,r.sH)(void 0,[...e],void 0,function*(e=""){var a=yield t(g.VehiclePlateQuery,{plate:e});if(!(null==a?void 0:a.plateVehicle))return null;let{plateVehicle:i}=a;return Object.assign({brand:i.brandName,model:i.modelName,version:i.versionName,year:i.year},i)}),[t]),fetchVehicleData:a}})(),o=e=>{for(let{entity:a,format:r,key:l}of[{entity:u.Ey.BRANDS,format:e=>(0,c.Yw)({extraProps:["urlLogo"],items:e,nameProperty:"name"}),key:"vehicleBrands"},{entity:u.Ey.MODELS,format:e=>(0,c.Yw)({items:e,nameProperty:"name"}),key:"vehicleModels"},{entity:u.Ey.YEARS,format:e=>(0,c.Yw)({items:e,nameProperty:"year"}),key:"vehicleYears"},{entity:u.Ey.VERSIONS,format:e=>(0,c.Yw)({items:e,nameProperty:"name"}),key:"vehicleVersions"}])e&&e[l]&&t({entity:a,payload:r(e[l]),type:i.SET_DATA})},d=a=>{var r,l;t({payload:a.plate,type:i.SET_CAR_PLATE});let n=((null==(r=null==e?void 0:e.data)?void 0:r[u.Ey.BRANDS])||[]).find(e=>String(null==e?void 0:e.name)===String(null==a?void 0:a.brand));t({payload:{id:a.brand,urlLogo:null==n?void 0:n.urlLogo},type:i.CHANGE_BRAND}),t({payload:String(a.model),type:i.CHANGE_MODEL}),t({payload:String(a.year),type:i.CHANGE_YEAR}),t({payload:String(a.version),type:i.CHANGE_VERSION}),t({payload:`${a.brand} ${a.model} ${a.year} ${a.version}`,type:i.SET_VEHICLE_DETAILS}),t({payload:null==(l=null==window?void 0:window.location)?void 0:l.pathname,type:i.SAVE_SEARCH_URL})};return{fetchCompatibilityDataService:l=>(0,r.sH)(void 0,void 0,void 0,function*(){var n;try{if(l){let s=yield b(t,()=>(0,r.sH)(void 0,void 0,void 0,function*(){let t=Object.assign(Object.assign({},e.selected||{}),{partNumber:l});return a(t)}));return s&&t({payload:null==(n=null==s?void 0:s.compatibility)?void 0:n.compatible,type:i.SET_COMPATIBILITY}),s}}catch(e){t({payload:(null==e?void 0:e.message)||"Erro ao buscar dados de compatibilidade do produto",type:i.SET_ERROR})}}),fetchPlateDataService:e=>(0,r.sH)(void 0,void 0,void 0,function*(){t({payload:null,type:i.SET_PLATE_ERROR});try{let a=yield l(e);if(!a)throw Error("Placa n\xe3o encontrada");d(a);let r=yield n(a);if(!r)throw Error("Tipo do ve\xedculo n\xe3o encontrado");return o(r),t({payload:!0,type:i.SET_SHOW_SUMMARY}),a}catch(e){return t({payload:e.message||"N\xe3o foi poss\xedvel pesquisar esta placa",type:i.SET_PLATE_ERROR}),null}}),fetchVehicleDataService:()=>(0,r.sH)(void 0,void 0,void 0,function*(){try{t({payload:!0,type:i.SET_LOADING});let a=yield b(t,()=>n(e.selected));return a&&o(a),t({payload:!1,type:i.SET_LOADING}),a}catch(e){t({payload:(null==e?void 0:e.message)||"Erro ao buscar dados do ve\xedculo",type:i.SET_ERROR})}}),processPlateData:d,processResponseData:o}})(N,w),C=((e,t)=>{let{data:a,selected:r}=e;return{handleFormFieldChange:(e,r)=>{if("brand"===e)return void(e=>{let r=((null==a?void 0:a[u.Ey.BRANDS])||[]).find(t=>String(null==t?void 0:t.name)===String(e));t({payload:{id:e,urlLogo:(null==r?void 0:r.urlLogo)||null},type:i.CHANGE_BRAND})})(r);let l={model:i.CHANGE_MODEL,version:i.CHANGE_VERSION,year:i.CHANGE_YEAR}[e];l&&t({payload:r,type:l})},handleFormReset:()=>{t({type:i.RESET_ALL})},handleFormSearch:()=>{var e,a;if(!((null==r?void 0:r.brand)&&r.model&&r.version&&r.year))return;let l=(0,c.p)(),n=null==(a=null==(e=(0,c.KS)(l,r))?void 0:e.split("%2B"))?void 0:a.join("+");t({payload:(0,c.hW)(r),type:i.SET_VEHICLE_DETAILS}),t({payload:n,type:i.SAVE_SEARCH_URL}),t({payload:!0,type:i.SET_SHOW_SUMMARY})},handleShowSummary:e=>{t({payload:e,type:i.SET_SHOW_SUMMARY})}}})(N,w),R=Array.isArray(null==e?void 0:e.partNumber)?null==e?void 0:e.partNumber[0]:null,D=(0,s.useMemo)(()=>(0,c.BX)(null==y?void 0:y.cookieDomain),[y]),P=(0,s.useRef)(!1),k=d(e=>x.push(e,{spa:!0})),j=d(e=>{var t;let a=(null==N?void 0:N.pendingNavigatePage)?null==(t=null==N?void 0:N.selected)?void 0:t.searchUrl:void 0,{existingFilters:i}=(0,c.p)(a),r=(0,c.U9)(e,i),l=(0,c.GQ)(i);if(l||!r){if(!r){if(!l&&!P.current){let t=(0,c.p)(null==e?void 0:e.searchUrl);x.push((0,c.Ui)(t),{spa:!0})}C.handleShowSummary(!1),P.current=!0}}else C.handleShowSummary(!0)});(0,s.useEffect)(()=>{D({selected:null==N?void 0:N.selected,uiState:null==N?void 0:N.uiState})},[null==y?void 0:y.cookieDomain,D,N]),(0,o.y)(()=>{var t;try{let{brand:a,brandLogo:r,model:l,version:n,year:s}=e;if(a&&l&&n&&s){let e={brand:a,brandLogo:r,model:l,version:n,year:s};w({payload:Object.assign(Object.assign({},u.VL),e),type:i.SET_VEHICLE_DATA}),w({payload:!0,type:i.SET_QUERY_PARAMS_MODE});let t=(0,c.hW)(e);w({payload:t,type:i.SET_VEHICLE_DETAILS})}else(null==(t=null==N?void 0:N.uiState)?void 0:t.isQueryParamsMode)&&C.handleFormReset()}catch(e){w({payload:null==e?void 0:e.message,type:i.SET_ERROR})}}),(0,s.useEffect)(()=>{var e;if(null==N?void 0:N.pendingNavigatePage){w({payload:null,type:i.RELOAD_PAGE_START});let t=null==(e=N.selected)?void 0:e.searchUrl;if(t)k(t);else{let e=(0,c.p)();k((0,c.Ui)(e))}}(null==N?void 0:N.pendingFetch)&&O()},[N,O,k,C]);let _=(0,s.useMemo)(()=>!!((null==N?void 0:N.compatibility)===u.N8.compatible&&R),[null==N?void 0:N.compatibility,R]);return Object.assign({alertContent:_?u.wZ.compatible:u.wZ.uncertain,entities:u.Ey,error:null==N?void 0:N.error,fetchCompatibilityDataService:()=>(0,r.sH)(void 0,void 0,void 0,function*(){R&&(yield T(R))}),fetchVehicleDataService:O,isCompatible:_,isQueryParamsMode:null==(t=null==N?void 0:N.uiState)?void 0:t.isQueryParamsMode,loading:null==N?void 0:N.loading,plateError:null==N?void 0:N.plateError,productPartNumber:R,removeVehicleFilters:e=>{let t=(0,c.p)(e);return(0,c.Ui)(t)},scrollToAnchorQuestionButton:c.or,searchPlate:I,selectedItems:null==N?void 0:N.selected,sellerInfo:e.sellerInfo,setUrl:e=>w({payload:e,type:i.SAVE_SEARCH_URL}),showSummary:null==(a=null==N?void 0:N.uiState)?void 0:a.showSummary,state:N,synchronizeUrlFilters:j,vehicleData:null==N?void 0:N.data,vehicleDetails:null==(E=null==N?void 0:N.selected)?void 0:E.vehicleDetails},C)}},85785:(e,t,a)=>{a.d(t,{A:()=>p});var i=a(80594),r=a(13186),l=a.n(r),n=a(6863),s=a.n(n),o=a(10325),d=a.n(o),u=a(69732),c=a(7750),m=a(53239);let g={ERROR_DUPLICATE_SUBMISSION:"Voc\xea j\xe1 enviou uma avalia\xe7\xe3o para este produto.",INVALID_PAYLOAD:"Verifique os campos preenchidos e tente novamente.",SOMETHING_WRONG:"N\xe3o foi poss\xedvel enviar sua avalia\xe7\xe3o. Por favor tente mais tarde.",TOKEN_INVALID:"Token expirado ou mal formatado. Por favor, efetue o login e tente novamente."},p=(e={})=>{let{publish:t}=(0,c.LJ)(),a=(0,u.tH)(),[r,n]=(0,m.useState)(),[o,p]=(0,m.useState)(),v=e=>t("page:load:screen",{value:{loadingState:e}});return{createUserReviewSubmission:function(e,t){return(0,i.sH)(this,void 0,void 0,function*(){v(!0);try{let{data:i,errors:r}=yield a.mutate({context:{timeout:null==t?void 0:t.timeout},mutation:s(),variables:e});return r?(n(null),p(r),v(!1),{data:i,error:r}):(n(i),p(null),v(!1),{data:i,error:null})}catch(e){return n(null),p(e),v(!1),{data:null,error:e}}})},error:o,getData:function(){return(0,i.sH)(this,arguments,void 0,function*(t={}){let i;v(!0);try{i=yield a.query(Object.assign({fetchPolicy:"network-only",query:d(),variables:t},e))}catch(e){return v(!1),p(e)}finally{v(!1),n(null==i?void 0:i.data)}return i.error&&p(i.error),v(!1),i})},mutateData:function(){return(0,i.sH)(this,arguments,void 0,function*(t={}){var i,r,s,o,d,u,c;let m;try{m=yield a.mutate(Object.assign({mutation:l(),variables:t},e))}catch(e){return p(g.SOMETHING_WRONG),{error:g.SOMETHING_WRONG}}finally{n(null!=(i=null==m?void 0:m.data)?i:{})}if(Object.keys(g).includes(null==(s=null==(r=m.data)?void 0:r.addProductReview)?void 0:s.status)){let e=g[null==(d=null==(o=m.data)?void 0:o.addProductReview)?void 0:d.status];return p(g[null==(c=null==(u=m.data)?void 0:u.addProductReview)?void 0:c.status]),Object.assign(Object.assign({},m),{error:e})}return m})},review:r}}},86180:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(53239),r=a(60064);let l=({faq:e,initialOpen:t=!1,maxQuestions:a,questionAs:l="h3",showLessQuestions:n="",showMoreQuestions:s=""})=>{let[o,d]=(0,i.useState)(null==e?void 0:e.map(e=>Object.assign(Object.assign({},e),{isOpen:t}))),[u,c]=(0,i.useState)(a);return i.createElement(i.Fragment,null,null==o?void 0:o.map((e,t)=>i.createElement(r.A,{asTitle:l,className:u&&t>=u?"hidden":"flex",cropTextContent:!1,"data-testid":"item-question",endIcon:e.isOpen?"chevron-up":"chevron-right",key:`faq-accordion-${t}`,onClick:()=>{d(e=>e.map((e,a)=>t===a?Object.assign(Object.assign({},e),{isOpen:!e.isOpen}):e))},open:e.isOpen,title:e.question},e.answer)),s&&u&&u<o.length&&i.createElement(r.A,{"data-testid":"show-more",endIcon:"chevron-down",onClick:()=>{c(e.length)},open:!1,title:s}),n&&u===o.length&&i.createElement(r.A,{"data-testid":"show-less",endIcon:"chevron-up",onClick:()=>{c(a)},open:!1,title:n}))}},86635:(e,t,a)=>{a.d(t,{A:()=>g});var i=a(53239),r=a(80004),l=a(24823),n=a(69279),s=a(53737),o=a(31642),d=a(28683),u=a(9470),c=a(34047);let m=({index:e,offerWithShipping:t,onAddToCart:a,onItemView:r,onSellerClick:m,title:g,variation:p})=>{var v,f;let{deliveryTypes:h,error:b,itemOffer:E}=t,y=(null==(v=null==E?void 0:E.seller)?void 0:v.id)===s.c$;return i.createElement(l.A,{key:"buyBox-list-item-".concat(null==(f=null==E?void 0:E.seller)?void 0:f.sku),onChange:({isVisible:a})=>{a&&r&&r(t,e,g)},triggerOnce:!0},i.createElement("div",{className:(0,n.y)({horizontal:"flex gap-md items-center",vertical:"flex flex-col gap-sm"}[p],"mb-sm gap-md rounded-sm elevation-down-md"),"data-testid":"buy-box-item"},y&&i.createElement("hr",{className:"m-[0px] h-2xsm w-full overflow-hidden rounded-sm border-none bg-rainbow-gradient","data-testid":"strip-magalu"}),i.createElement("div",{className:"flex flex-col gap-sm p-sm"},y&&"vertical"===p&&i.createElement("i",{className:"icon icon-magalu flex justify-start text-interaction-default font-2xlg-regular","data-testid":"logo-magalu"}),i.createElement(d.A,{itemOffer:E}),i.createElement(u.A,{onSellerClick:m,seller:null==E?void 0:E.seller}),((null==h?void 0:h.length)||0)>0&&i.createElement(c.A,{items:h}),i.createElement(o.A,{centered:!1,className:"btn-success w-full uppercase","data-testid":"buy-box-button-add-to-cart",disabled:!!b,onClick:e=>a(e,t),size:"large",startIcon:"shopping-bag-fast"},b?"N\xc3O DISPON\xcdVEL":"COMPRAR AGORA"))))},g=({loading:e,offerWithShippingList:t,onAddToCart:a,onItemView:l,onSellerClick:n,title:s="Escolha a melhor oferta",variation:o="vertical"})=>i.createElement(i.Fragment,null,i.createElement("p",{className:"mb-xsm font-sm-bold"},s),e?i.createElement("div",{className:"flex h-[50vh] w-[100vw] items-center justify-center"},i.createElement(r.A,{alt:"\xedcone de carregamento de lista de produtos","data-testid":"buy-box-list-loading",height:"80",src:"https://wx.mlcdn.com.br/site/shared/icons/LoaderColorFull.svg",width:"80"})):t.map((e,t)=>{var r,d;return i.createElement(m,{index:t,key:null==(d=null==(r=null==e?void 0:e.itemOffer)?void 0:r.seller)?void 0:d.id,offerWithShipping:e,onAddToCart:a,onItemView:l,onSellerClick:n,title:s,variation:o})}));g.BuyBoxItem=m},87157:(e,t,a)=>{a.d(t,{Ay:()=>l,QM:()=>n,eR:()=>s,vU:()=>o});var i=a(53239);let r=(0,i.createContext)(null);r.displayName="TabContext";let l=({children:e,value:t})=>{let a=(()=>{let[e,t]=i.useState("");return i.useEffect(()=>{t(`id-${Math.round(1e5*Math.random())}`)},[]),e})(),l=(0,i.useMemo)(()=>({idPrefix:a,value:t}),[t]);return i.createElement(r.Provider,{value:l},e)},n=()=>(0,i.useContext)(r),s=(e,t)=>{let{idPrefix:a}=e;return`${a}-P-${t}`},o=(e,t)=>{let{idPrefix:a}=e;return`${a}-T-${t}`}},88055:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var i=a(20766),r=a(7750),l=a(25378),n=a(53239),s=a(80594),o=a(24823),d=a(38852),u=a(74823),c=a(14525);let m=({onItemClick:e,onItemFavoriteClick:t,onItemView:a,sellerItems:i,variant:r})=>{let l=r?"default":"full";return n.createElement("div",{className:r?"pl-md pr-md xlg:pl-3xsm xlg:pr-3xsm grid grid-flow-col gap-xsm auto-cols-max overflow-x-auto max-w-[100vw] xlg:max-w-[1280px] relative":"grid grid-cols-2 gap-xsm md:grid-cols-5 xlg:max-w-[1280px] relative"},null==i?void 0:i.map((i,r)=>{var{"data-product":m}=i,g=(0,s.Tt)(i,["data-product"]);return n.createElement(o.A,{key:"showcase-list-item-".concat((null==m?void 0:m.id)||r.toString()),onChange:({isVisible:e})=>{e&&a&&a(Object.assign(Object.assign({},m),{position:r+1}))},threshold:.5,triggerOnce:!0},n.createElement(d.A,Object.assign({as:"a",className:"relative h-full min-h-[317px] flex-shrink-0",display:"default",key:"productlist-product-card-".concat(r.toString()),onClick:t=>{var a;return a=Object.assign(Object.assign({},m),{position:r+1}),void(e&&e(t,a,r))},onClickFavorite:(e,a)=>{var i;i=Object.assign(Object.assign({},m),{position:r+1}),t&&t(e,a,i)},showFavoriteButton:(0,c.Y)(),size:l},g,g.customProps||{},(0,u.Q)(g))))}))};var g=a(72599),p=a(56732),v=a.n(p),f=a(69732),h=a(19155),b=a(64523);a(20533),a(79561);var E=a(90710);a(38863);let y=({baseProductUrl:e,data:t,page:a,pagination:o,placeId:d,position:u,spa:c,title:p,type:y,URLParams:x,variant:A})=>{let{publish:S}=(0,r.LJ)(),N=(0,g.E)(),{useNavigation:w}=(0,l.xo)(),T=(0,i.rd)(),I=(0,n.useMemo)(()=>{var e,a,i,r,l,n,s,o,d,u,c,m;return{brand:null==(r=null==(i=null==(a=null==(e=null==t?void 0:t.sellerPage)?void 0:e[y])?void 0:a.settings)?void 0:i.brand)?void 0:r.slug,category:null==(o=null==(s=null==(n=null==(l=null==t?void 0:t.sellerPage)?void 0:l[y])?void 0:n.settings)?void 0:s.category)?void 0:o.id,sellerId:null==x?void 0:x.sellerId,subCategory:null==(m=null==(c=null==(u=null==(d=null==t?void 0:t.sellerPage)?void 0:d[y])?void 0:u.settings)?void 0:c.subCategory)?void 0:m.id}},[t,y,x]),O=(0,n.useMemo)(()=>{var e,a,i,r;return(null==(r=null==(i=null==(a=null==(e=null==t?void 0:t.sellerPage)?void 0:e[y])?void 0:a.settings)?void 0:i.category)?void 0:r.id)||"productSlide"!==y?{}:{sortOrientation:"desc",sortType:"soldQuantity"}},[null==t?void 0:t.sellerPage,y]),{addToWishlist:C,isOnWishlist:R,removeFromWishlist:D}=N,{city:P,state:k}=(0,b.r6)(T),j="listgrid",{items:_}=(({customerId:e,filters:t,page:a,pageSize:i,partnerId:r,queryOptions:l={},sellerId:o,sort:d,term:u,zipCode:c})=>{let m=(0,f.tH)(),[g,p]=(0,n.useState)([]),[b,E]=(0,n.useState)(null),[y,x]=(0,n.useState)(!1),A=e=>(0,s.sH)(void 0,[e],void 0,function*({customerId:e,page:a,pageSize:i,partnerId:r,sellerId:n,sort:s,term:o,zipCode:d}){var u;x(!0);try{let c=Object.assign(Object.assign({customerId:(null==e?void 0:e.startsWith("temp_"))?null:e,filters:(({brand:e,category:t,sellerId:a,subCategory:i})=>{let r=[];return(0,h.A)(i)||r.push({type:"subcategory",value:i}),(0,h.A)(t)||r.push({type:"category",value:t}),(0,h.A)(e)||r.push({type:"brand",value:e}),(0,h.A)(a)||r.push({type:"seller",value:a}),r})(Object.assign({},t)),page:a,pageSize:i,partnerId:r,sellerId:n},s&&Object.assign({},s)),{term:o,zipCode:d}),{data:g}=yield m.query({fetchPolicy:l.fetchPolicy||"cache-first",query:v(),variables:c});g&&p(null==(u=null==g?void 0:g.search)?void 0:u.items)}catch(e){E(e)}finally{x(!1)}}),{brand:S,category:N,subCategory:w}=t||{},{sortOrientation:T,sortType:I}=d||{};return(0,n.useEffect)(()=>(A({customerId:e,filters:t,page:a,pageSize:i,partnerId:r,sellerId:o,sort:d,term:u,zipCode:c}),()=>{p([])}),[S,N,w,e,a,i,r,T,I,u,c]),{error:b,getData:A,items:g,loading:y}})({filters:I,page:null==o?void 0:o.page,pageSize:null==o?void 0:o.pageSize,sort:O});return n.createElement(m,{onItemClick:(e,a,i)=>((e,a,i)=>{var r,l,n,s,o,d,u,m,g,p;e.preventDefault();let{title:v}=a;S("product:item:click",{value:{city:P,eventData:{display:"productSlide"===y?"list":"gallery",filters:[null==(s=null==(n=null==(l=null==(r=null==t?void 0:t.sellerPage)?void 0:r[y])?void 0:l.settings)?void 0:n.category)?void 0:s.id,null==(m=null==(u=null==(d=null==(o=null==t?void 0:t.sellerPage)?void 0:o[y])?void 0:d.settings)?void 0:u.subCategory)?void 0:m.id],list:v,listPosition:i,origin:"bob"},showcaseItem:a,state:k}}),w({data:{category:{id:null==(g=null==a?void 0:a.category)?void 0:g.id,sub_category:{id:null==(p=null==a?void 0:a.subcategory)?void 0:p.id}},seller_id:null==x?void 0:x.sellerId,sku:(null==a?void 0:a.id)||(null==a?void 0:a.offerId)},fallback:()=>{T.push(e.currentTarget.getAttribute("href"),{spa:c})},type:"product_detail"})})(e,a,i),onItemFavoriteClick:(e,t,i)=>((e,t,i)=>{var r,l;let{id:n,offers:s,title:o}=i;t?(C({name:o,price:null==(l=null==(r=null==s?void 0:s[0])?void 0:r.bestPrice)?void 0:l.totalAmount,variationId:n}),S("product:wishlist:click",{value:{active:t,eventData:{list:"vitrine",origin:"bob"},listPosition:u,pageId:a,showcaseItem:i}})):D({variationId:n})})(0,t,i),onItemView:e=>{S("product:item:view",{value:{city:P,eventData:{display:j,list:p,listPosition:u,origin:"bob",showcase:{pageId:a,placeId:d,title:p,type:j},type:"recomendacao"},listPosition:u,showcaseItem:e,state:k}})},sellerItems:(0,E.Ay)({baseProductUrl:e,isOnWishlist:R,items:_}),variant:A})}},94228:(e,t,a)=>{a.d(t,{A:()=>s});var i=a(80594),r=a(53239),l=a(31642),n=a(69279);let s=r.memo(({buttons:e,isRow:t=!1})=>(null==e?void 0:e.length)?r.createElement("div",{className:(({isRow:e})=>(0,n.y)("flex","justify-end","gap-[14px]",e?"w-auto flex-row":"w-full flex-col",e?"flex-row":"flex-col"))({isRow:t}),"data-testid":"cardan-alter-button-box"},e.map((e,a)=>{var{border:s=!1,label:o}=e,d=(0,i.Tt)(e,["border","label"]);return r.createElement(l.A,Object.assign({className:(e=>(0,n.y)(e.hasBorder?"btn-outline":"btn-invisible","btn","cursor-pointer","transition-colors","hover:bg-gray-100",e.isRow?"w-auto":"w-full","h-[48px]","min-w-[140px]","flex","items-center","justify-center","p-[12px 16px]","font-medium"))({hasBorder:s,isRow:t}),"data-testid":`cardan-alter-button-${a}`,size:"large"},d,{key:`button-${o}-${a}`}),o)})):null)},95572:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(80594),r=a(53239),l=a(87157),n=a(69279);let s=r.forwardRef(function(e,t){let{children:a,className:l,onChange:s,value:o}=e,d=(0,i.Tt)(e,["children","className","onChange","value"]),u=r.Children.map(a,e=>{if(!r.isValidElement(e))return e;let t=e.props.value;return void 0===t?null:r.cloneElement(e,{onChange:s,selected:t===o,value:t})});return r.createElement("div",Object.assign({},d,{className:(0,n.y)("tab-group","sticky","top-[0]","elevation-down-sm","min-h-fit","cursor-pointer","md:pl-md","md:block",l),ref:t,role:"tablist"}),u)}),o=r.forwardRef(function(e,t){let{children:a}=e,n=(0,i.Tt)(e,["children"]),o=(0,l.QM)();if(null===o)throw TypeError("No TabContext provided");let d=r.Children.map(a,e=>r.isValidElement(e)?r.cloneElement(e,{"aria-controls":(0,l.eR)(o,e.props.value),id:(0,l.vU)(o,e.props.value),role:"tab"}):null);return r.createElement(s,Object.assign({},n,{ref:t,value:o.value}),d)})},96465:(e,t,a)=>{a.d(t,{iX:()=>g});var i=a(85825),r=a(16880),l=a(73357);class n extends i.A{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}let s=function(e){let t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),a={};return t[1]&&(a.length=parseInt(t[1],10)),t[2]&&(a.offset=parseInt(t[2],10)),a},o=function(e){let t,a={};if(!e)return a;let i=e.split(RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r=i.length;for(;r--;)""!==i[r]&&((t=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),a[t[0]]=t[1]);return a},d=e=>{let t=e.split("x"),a={};return t[0]&&(a.width=parseInt(t[0],10)),t[1]&&(a.height=parseInt(t[1],10)),a};class u extends i.A{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,a;if(0!==(e=e.trim()).length){if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});this.tagMappers.reduce((t,a)=>{let i=a(e);return i===e?t:t.concat([i])},[e]).forEach(e=>{for(let t=0;t<this.customParsers.length;t++)if(this.customParsers[t].call(this,e))return;if(0!==e.indexOf("#EXT"))return void this.trigger("data",{type:"comment",text:e.slice(1)});if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))return void this.trigger("data",{type:"tag",tagType:"m3u"});if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e)){a={type:"tag",tagType:"inf"},t[1]&&(a.duration=parseFloat(t[1])),t[2]&&(a.title=t[2]),this.trigger("data",a);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e)){a={type:"tag",tagType:"targetduration"},t[1]&&(a.duration=parseInt(t[1],10)),this.trigger("data",a);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(e)){a={type:"tag",tagType:"version"},t[1]&&(a.version=parseInt(t[1],10)),this.trigger("data",a);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e)){a={type:"tag",tagType:"media-sequence"},t[1]&&(a.number=parseInt(t[1],10)),this.trigger("data",a);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e)){a={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(a.number=parseInt(t[1],10)),this.trigger("data",a);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e)){a={type:"tag",tagType:"playlist-type"},t[1]&&(a.playlistType=t[1]),this.trigger("data",a);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(e)){a=(0,r.A)(s(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",a);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e)){a={type:"tag",tagType:"allow-cache"},t[1]&&(a.allowed=!/NO/.test(t[1])),this.trigger("data",a);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(e)){if(a={type:"tag",tagType:"map"},t[1]){let e=o(t[1]);e.URI&&(a.uri=e.URI),e.BYTERANGE&&(a.byterange=s(e.BYTERANGE))}this.trigger("data",a);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(e)){a={type:"tag",tagType:"stream-inf"},t[1]&&(a.attributes=o(t[1]),a.attributes.RESOLUTION&&(a.attributes.RESOLUTION=d(a.attributes.RESOLUTION)),a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10)),a.attributes["FRAME-RATE"]&&(a.attributes["FRAME-RATE"]=parseFloat(a.attributes["FRAME-RATE"])),a.attributes["PROGRAM-ID"]&&(a.attributes["PROGRAM-ID"]=parseInt(a.attributes["PROGRAM-ID"],10))),this.trigger("data",a);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(e)){a={type:"tag",tagType:"media"},t[1]&&(a.attributes=o(t[1])),this.trigger("data",a);return}if(t=/^#EXT-X-ENDLIST/.exec(e))return void this.trigger("data",{type:"tag",tagType:"endlist"});if(t=/^#EXT-X-DISCONTINUITY/.exec(e))return void this.trigger("data",{type:"tag",tagType:"discontinuity"});if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e)){a={type:"tag",tagType:"program-date-time"},t[1]&&(a.dateTimeString=t[1],a.dateTimeObject=new Date(t[1])),this.trigger("data",a);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(e)){a={type:"tag",tagType:"key"},t[1]&&(a.attributes=o(t[1]),a.attributes.IV&&("0x"===a.attributes.IV.substring(0,2).toLowerCase()&&(a.attributes.IV=a.attributes.IV.substring(2)),a.attributes.IV=a.attributes.IV.match(/.{8}/g),a.attributes.IV[0]=parseInt(a.attributes.IV[0],16),a.attributes.IV[1]=parseInt(a.attributes.IV[1],16),a.attributes.IV[2]=parseInt(a.attributes.IV[2],16),a.attributes.IV[3]=parseInt(a.attributes.IV[3],16),a.attributes.IV=new Uint32Array(a.attributes.IV))),this.trigger("data",a);return}if(t=/^#EXT-X-START:(.*)$/.exec(e)){a={type:"tag",tagType:"start"},t[1]&&(a.attributes=o(t[1]),a.attributes["TIME-OFFSET"]=parseFloat(a.attributes["TIME-OFFSET"]),a.attributes.PRECISE=/YES/.test(a.attributes.PRECISE)),this.trigger("data",a);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e)){a={type:"tag",tagType:"cue-out-cont"},t[1]?a.data=t[1]:a.data="",this.trigger("data",a);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(e)){a={type:"tag",tagType:"cue-out"},t[1]?a.data=t[1]:a.data="",this.trigger("data",a);return}if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e)){a={type:"tag",tagType:"cue-in"},t[1]?a.data=t[1]:a.data="",this.trigger("data",a);return}if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1]){(a={type:"tag",tagType:"skip"}).attributes=o(t[1]),a.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(a.attributes["SKIPPED-SEGMENTS"]=parseInt(a.attributes["SKIPPED-SEGMENTS"],10)),a.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(a.attributes["RECENTLY-REMOVED-DATERANGES"]=a.attributes["RECENTLY-REMOVED-DATERANGES"].split("	")),this.trigger("data",a);return}if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1]){(a={type:"tag",tagType:"part"}).attributes=o(t[1]),["DURATION"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=parseFloat(a.attributes[e]))}),["INDEPENDENT","GAP"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=/YES/.test(a.attributes[e]))}),a.attributes.hasOwnProperty("BYTERANGE")&&(a.attributes.byterange=s(a.attributes.BYTERANGE)),this.trigger("data",a);return}if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1]){(a={type:"tag",tagType:"server-control"}).attributes=o(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=parseFloat(a.attributes[e]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=/YES/.test(a.attributes[e]))}),this.trigger("data",a);return}if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1]){(a={type:"tag",tagType:"part-inf"}).attributes=o(t[1]),["PART-TARGET"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=parseFloat(a.attributes[e]))}),this.trigger("data",a);return}if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1]){(a={type:"tag",tagType:"preload-hint"}).attributes=o(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(e){if(a.attributes.hasOwnProperty(e)){a.attributes[e]=parseInt(a.attributes[e],10);let t="BYTERANGE-LENGTH"===e?"length":"offset";a.attributes.byterange=a.attributes.byterange||{},a.attributes.byterange[t]=a.attributes[e],delete a.attributes[e]}}),this.trigger("data",a);return}if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1]){(a={type:"tag",tagType:"rendition-report"}).attributes=o(t[1]),["LAST-MSN","LAST-PART"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=parseInt(a.attributes[e],10))}),this.trigger("data",a);return}if((t=/^#EXT-X-DATERANGE:(.*)$/.exec(e))&&t[1]){(a={type:"tag",tagType:"daterange"}).attributes=o(t[1]),["ID","CLASS"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=String(a.attributes[e]))}),["START-DATE","END-DATE"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=new Date(a.attributes[e]))}),["DURATION","PLANNED-DURATION"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=parseFloat(a.attributes[e]))}),["END-ON-NEXT"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=/YES/i.test(a.attributes[e]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(e){a.attributes.hasOwnProperty(e)&&(a.attributes[e]=a.attributes[e].toString(16))});let e=/^X-([A-Z]+-)+[A-Z]+$/;for(let t in a.attributes){if(!e.test(t))continue;let i=/[0-9A-Fa-f]{6}/g.test(a.attributes[t]),r=/^\d+(\.\d+)?$/.test(a.attributes[t]);a.attributes[t]=i?a.attributes[t].toString(16):r?parseFloat(a.attributes[t]):String(a.attributes[t])}this.trigger("data",a);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(e))return void this.trigger("data",{type:"tag",tagType:"independent-segments"});if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(e))return void this.trigger("data",{type:"tag",tagType:"i-frames-only"});if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(e)){(a={type:"tag",tagType:"content-steering"}).attributes=o(t[1]),this.trigger("data",a);return}if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(e)){(a={type:"tag",tagType:"i-frame-playlist"}).attributes=o(t[1]),a.attributes.URI&&(a.uri=a.attributes.URI),a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10)),a.attributes.RESOLUTION&&(a.attributes.RESOLUTION=d(a.attributes.RESOLUTION)),a.attributes["AVERAGE-BANDWIDTH"]&&(a.attributes["AVERAGE-BANDWIDTH"]=parseInt(a.attributes["AVERAGE-BANDWIDTH"],10)),a.attributes["FRAME-RATE"]&&(a.attributes["FRAME-RATE"]=parseFloat(a.attributes["FRAME-RATE"])),this.trigger("data",a);return}if(t=/^#EXT-X-DEFINE:(.*)$/.exec(e)){(a={type:"tag",tagType:"define"}).attributes=o(t[1]),this.trigger("data",a);return}this.trigger("data",{type:"tag",data:e.slice(4)})})}}addParser({expression:e,customType:t,dataParser:a,segment:i}){"function"!=typeof a&&(a=e=>e),this.customParsers.push(r=>{if(e.exec(r))return this.trigger("data",{type:"custom",data:a(r),customType:t,segment:i}),!0})}addTagMapper({expression:e,map:t}){this.tagMappers.push(a=>e.test(a)?t(a):a)}}let c=function(e){let t={};return Object.keys(e).forEach(function(a){t[a.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase())]=e[a]}),t},m=function(e){let{serverControl:t,targetDuration:a,partTargetDuration:i}=e;if(!t)return;let r="#EXT-X-SERVER-CONTROL",l="holdBack",n="partHoldBack",s=a&&3*a,o=i&&2*i;a&&!t.hasOwnProperty(l)&&(t[l]=s,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${s}).`})),s&&t[l]<s&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${t[l]}) to targetDuration * 3 (${s})`}),t[l]=s),i&&!t.hasOwnProperty(n)&&(t[n]=3*i,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[n]}).`})),i&&t[n]<o&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${t[n]}) to partTargetDuration * 2 (${o}).`}),t[n]=o)};class g extends i.A{constructor(e={}){let t,a;super(),this.lineStream=new n,this.parseStream=new u,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;let i=this,s=[],o={},d=!1,g=function(){},p={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},v=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let f=0,h=0,b={};this.on("end",()=>{!o.uri&&(o.parts||o.preloadHints)&&(!o.map&&t&&(o.map=t),!o.key&&a&&(o.key=a),o.timeline||"number"!=typeof v||(o.timeline=v),this.manifest.preloadSegment=o)}),this.parseStream.on("data",function(e){let n,u;if(i.manifest.definitions){for(let t in i.manifest.definitions)if(e.uri&&(e.uri=e.uri.replace(`{$${t}}`,i.manifest.definitions[t])),e.attributes)for(let a in e.attributes)"string"==typeof e.attributes[a]&&(e.attributes[a]=e.attributes[a].replace(`{$${t}}`,i.manifest.definitions[t]))}({tag(){(({version(){e.version&&(this.manifest.version=e.version)},"allow-cache"(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){let t={};"length"in e&&(o.byterange=t,t.length=e.length,"offset"in e||(e.offset=f)),"offset"in e&&(o.byterange=t,t.offset=e.offset),f=t.offset+t.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.title&&(o.title=e.title),e.duration>0&&(o.duration=e.duration),0===e.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key(){if(!e.attributes)return void this.trigger("warn",{message:"ignoring key declaration without attribute list"});if("NONE"===e.attributes.METHOD){a=null;return}if(!e.attributes.URI)return void this.trigger("warn",{message:"ignoring key declaration without URI"});if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes};return}if("com.microsoft.playready"===e.attributes.KEYFORMAT){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI};return}if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return -1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23))?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:(0,l.A)(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"});e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(a.iv=e.attributes.IV)},"media-sequence"(){if(!isFinite(e.number))return void this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number});this.manifest.mediaSequence=e.number},"discontinuity-sequence"(){if(!isFinite(e.number))return void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number});this.manifest.discontinuitySequence=e.number,v=e.number},"playlist-type"(){if(!/VOD|EVENT/.test(e.playlistType))return void this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist});this.manifest.playlistType=e.playlistType},map(){t={},e.uri&&(t.uri=e.uri),e.byterange&&(t.byterange=e.byterange),a&&(t.key=a)},"stream-inf"(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||p,!e.attributes)return void this.trigger("warn",{message:"ignoring empty stream-inf attributes"});o.attributes||(o.attributes={}),(0,r.A)(o.attributes,e.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||p,!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});let t=this.manifest.mediaGroups[e.attributes.TYPE];t[e.attributes["GROUP-ID"]]=t[e.attributes["GROUP-ID"]]||{},n=t[e.attributes["GROUP-ID"]],(u={default:/yes/i.test(e.attributes.DEFAULT)}).default?u.autoselect=!0:u.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(u.language=e.attributes.LANGUAGE),e.attributes.URI&&(u.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(u.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(u.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(u.forced=/yes/i.test(e.attributes.FORCED)),n[e.attributes.NAME]=u},discontinuity(){v+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),o.dateTimeString=e.dateTimeString,o.dateTimeObject=e.dateTimeObject;let{lastProgramDateTime:t}=this;this.lastProgramDateTime=new Date(e.dateTimeString).getTime(),null===t&&this.manifest.segments.reduceRight((e,t)=>(t.programDateTime=e-1e3*t.duration,t.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(e.duration)||e.duration<0)return void this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration});this.manifest.targetDuration=e.duration,m.call(this,this.manifest)},start(){if(!e.attributes||isNaN(e.attributes["TIME-OFFSET"]))return void this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}},"cue-out"(){o.cueOut=e.data},"cue-out-cont"(){o.cueOutCont=e.data},"cue-in"(){o.cueIn=e.data},skip(){this.manifest.skip=c(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part(){d=!0;let t=this.manifest.segments.length,a=c(e.attributes);o.parts=o.parts||[],o.parts.push(a),a.byterange&&(a.byterange.hasOwnProperty("offset")||(a.byterange.offset=h),h=a.byterange.offset+a.byterange.length);let i=o.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${i} for segment #${t}`,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((e,t)=>{e.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${t} lacks required attribute(s): LAST-PART`})})},"server-control"(){let t=this.manifest.serverControl=c(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),m.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){let t=this.manifest.segments.length,a=c(e.attributes),i=a.type&&"PART"===a.type;o.preloadHints=o.preloadHints||[],o.preloadHints.push(a),a.byterange&&!a.byterange.hasOwnProperty("offset")&&(a.byterange.offset=i?h:0,i&&(h=a.byterange.offset+a.byterange.length));let r=o.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${r} for segment #${t}`,e.attributes,["TYPE","URI"]),a.type)for(let e=0;e<o.preloadHints.length-1;e++){let i=o.preloadHints[e];i.type&&i.type===a.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${r} for segment #${t} has the same TYPE ${a.type} as preload hint #${e}`})}},"rendition-report"(){let t=c(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);let a=this.manifest.renditionReports.length-1,i=["LAST-MSN","URI"];d&&i.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${a}`,e.attributes,i)},"part-inf"(){this.manifest.partInf=c(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),m.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(c(e.attributes));let t=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${t}`,e.attributes,["ID","START-DATE"]);let a=this.manifest.dateRanges[t];a.endDate&&a.startDate&&new Date(a.endDate)<new Date(a.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),a.duration&&a.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),a.plannedDuration&&a.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});let i=!!a.endOnNext;if(i&&!a.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),i&&(a.duration||a.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),a.duration&&a.endDate){let e=a.startDate.getTime()+1e3*a.duration;this.manifest.dateRanges[t].endDate=new Date(e)}if(b[a.id]){for(let e in b[a.id])if(a[e]&&JSON.stringify(b[a.id][e])!==JSON.stringify(a[e])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}let e=this.manifest.dateRanges.findIndex(e=>e.id===a.id);this.manifest.dateRanges[e]=(0,r.A)(this.manifest.dateRanges[e],a),b[a.id]=(0,r.A)(b[a.id],a),this.manifest.dateRanges.pop()}else b[a.id]=a},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=c(e.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",e.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};let t=(e,t)=>{if(e in this.manifest.definitions)return void this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${e}`});this.manifest.definitions[e]=t};if("QUERYPARAM"in e.attributes){if("NAME"in e.attributes||"IMPORT"in e.attributes)return void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});let a=this.params.get(e.attributes.QUERYPARAM);return a?void t(e.attributes.QUERYPARAM,decodeURIComponent(a)):void this.trigger("error",{message:`EXT-X-DEFINE: No query param ${e.attributes.QUERYPARAM}`})}return"NAME"in e.attributes?"IMPORT"in e.attributes?void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):"VALUE"in e.attributes&&"string"==typeof e.attributes.VALUE?void t(e.attributes.NAME,e.attributes.VALUE):void this.trigger("error",{message:`EXT-X-DEFINE: No value for ${e.attributes.NAME}`}):"IMPORT"in e.attributes?this.mainDefinitions[e.attributes.IMPORT]?void t(e.attributes.IMPORT,this.mainDefinitions[e.attributes.IMPORT]):void this.trigger("error",{message:`EXT-X-DEFINE: No value ${e.attributes.IMPORT} to import, or IMPORT used on main playlist`}):void this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:e.attributes,uri:e.uri,timeline:v}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",e.attributes,["BANDWIDTH","URI"])}})[e.tagType]||g).call(i)},uri(){o.uri=e.uri,s.push(o),!this.manifest.targetDuration||"duration"in o||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),a&&(o.key=a),o.timeline=v,t&&(o.map=t),h=0,null!==this.lastProgramDateTime&&(o.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*o.duration),o={}},comment(){},custom(){e.segment?(o.custom=o.custom||{},o.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(i)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,a){let i=[];a.forEach(function(e){t.hasOwnProperty(e)||i.push(e)}),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}},98413:(e,t,a)=>{a.d(t,{Q2:()=>s,E4:()=>d,g:()=>g,G8:()=>m,_V:()=>u,lN:()=>p,o7:()=>c,KG:()=>o});var i=a(80594),r=a(20446),l=a.n(r);let n=(e,t,a,r,n)=>(0,i.sH)(void 0,void 0,void 0,function*(){let i="miniapp"===a?"appmagalu":"mixer-review",s=l().createHmac("sha256",n).update(i).digest("hex"),o=Object.assign({"X-Client-Id":i,"X-Custom-Signature":s,"X-Customer-Id":n},e),d=t.type.split("/")[0],u=new FormData;u.append("file",t);let c=yield fetch(`${r}/api/review/v1/${d}/upload`,{body:u,headers:o,method:"POST"});if(!c.ok)throw Error(`Response status: ${c.status}`);let{errors:m,media:g}=yield c.json();if(m&&m.length)throw Error(`Upload failed with status: ${m[0].message}, with secret: ${n}`);return{mediaId:null==g?void 0:g.id,mediaType:d}}),s=e=>e&&0!==e.length?e.map(e=>{var t;return((null==(t=e.label)?void 0:t.toLowerCase().replace(/^\s+|\s+$/g,""))||"").replace(/\s+/g,"-")}).join(";"):"",o=(e,t,a,i,r)=>{let l=i(t,a),n=(null==l?void 0:l.valid)&&"text.light"!==(null==l?void 0:l.textColor)?{}:{[e]:l};return r(e,n),n},d=(e,t,a,i)=>e.filter(e=>t>=a&&t<i?"negative"===e.tag:t>=i&&"positive"===e.tag),u=(e,t,a,i)=>{var r;let l=t&&!1!==(null==(r=a.comment)?void 0:r.valid);return 0===e||e<i&&!l},c=e=>(0,i.sH)(void 0,[e],void 0,function*({attachedMedia:e,customerId:t,mediaApiDetails:{channel:a,headers:i,mediaApiUrl:r}}){let l=[];try{for(let s of e){let e=yield n(i,s,a,r,t||"");e&&l.push(e)}}catch(e){console.error(`Upload Failed: ${e}`)}return l}),m=(e,t,a,i,r,l,n,s)=>{var o,d,u,c,m,g,p;let v=[],f=[],{offers:h=[]}=(null==r?void 0:r.item)||{},b=(null==h?void 0:h[0])||{},E=(null==(o=null==b?void 0:b.seller)?void 0:o.sku)||"",y=(null==(d=null==r?void 0:r.item)?void 0:d.image)||"";return(null==(u=null==i?void 0:i.attachedMedia)?void 0:u.length)>0&&i.attachedMedia.forEach(e=>{"video"===(null==e?void 0:e.mediaType)?f.push(null==e?void 0:e.mediaId):v.push(null==e?void 0:e.mediaId)}),{request:Object.assign(Object.assign({campaignId:"CRM",channel:l,description:e,dimensions:null==a?void 0:a.map(({id:e,label:a=""})=>({id:e,label:a,rating:t})),product:{images:v,productImageUrl:y,productLink:`${n}/${null==(c=null==r?void 0:r.item)?void 0:c.path}`,productName:(null==(m=null==r?void 0:r.item)?void 0:m.title)||"",ratingValue:null==t?void 0:t.toString(),sku:E,videos:f},rating:t},s),{sellerId:(null==(g=b.seller)?void 0:g.id)||"",variationId:(null==(p=null==r?void 0:r.item)?void 0:p.id)||""})}},g=(e,t)=>t.some(t=>t.id===e),p=(e,t)=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e]}}]);
//# sourceMappingURL=vendors-66ca7ca1-f87f499997728052.js.map